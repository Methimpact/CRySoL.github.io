
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Empaquetar un script Python para Debian (y mantenerlo)</title>
    
    <meta name="author" content="CRySoL">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
<!--
	  <a class="brand-image" href="/"><img class="brand-image" src="/assets/themes/twitter/logo.png"/></a>
-->
          <a class="brand" href="/">CRySoL</a>
          <ul class="nav">
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/recipes.html">Recipes</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/users.html">Users</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="row-fluid">
	<div class="content">
          
<div class="sidebar span3">
  <div id="logo">
  <a href="/">
    <img src="/assets/images/logo.png" alt="logo"/>
  </a>
</div>

  <div class="metadata">
  <h2>this</h2>
  <ul>
    
      <li>author: 
  <a href="/users.html#david_villa">
   david.villa
  </a>


        
        <span class="author-photo">

  <img src="http://www.gravatar.com/avatar/41aae9eabb1ef8e1cb8ab5619af82083?s=48" alt="gravatar"/>

</span>

      </li>
      
      <li>
        <!-- AddThis Follow BEGIN -->
<span class="addthis_toolbox addthis_default_style">

<a class="addthis_button_twitter_follow" addthis:userid="david_vi11a"></a>

</span>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Follow END -->

      </li>
      
    

    <li>created: 2007-03-15 </li>

    <li><a href="https://github.com/CRySoL/web.source/raw/master/_posts/migrated/2007-03-15-empaquetar-un-script-python-para-debian-y-mantenerlo.textile">source / <a href="https://github.com/CRySoL/web.source/edit/master/_posts/migrated/2007-03-15-empaquetar-un-script-python-para-debian-y-mantenerlo.textile">edit</a></li>

  
    <li>categories:
    
      <a href="/categories.html#recipe-ref">recipe</a>
    
    </li>
  

  
      <li>migrated&nbsp;from&nbsp;<a href="http://crysol.org/node/325">node/325</a></li>
  

  
    <li>tags:
    
      <a href="/tags.html#Debian-devel-ref">Debian-devel</a>
    
    </li>
  
  </ul>

  
     
     
  

  
     
     
     <a class="tag-icon" href="/tags.html#Debian-devel-ref">
        <img src="http://crysol.org/files/category_pictures/debian-devel.png" title="Debian-devel" alt="Debian-devel-icon"/>
     </a>
     
  

  <!-- AddThis Button BEGIN -->
<div class="share addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Button END -->

</div>

<div class="related">
  <h2>related</h2>
  <ul>
    
    <li><a href="/recipe/2005-09-13/ssh-y-scp-para-acceder-a-equipos-remotos-sin-escribir-la-clave-public-key-authentication">SSH y SCP para acceder a equipos remotos sin escribir la clave (public key authentication)</a></li>
    
    <li><a href="/2005-09-24/acabo-de-registrarme-en-el-portal">Acabo de registrarme en el Portal</a></li>
    
    <li><a href="/2005-09-26/buenas-a-tods">Buenas a tod@s!</a></li>
    
    <li><a href="/tale/2005-09-26/instalacin-local-de-mambo-joomla-bajo-gnu-linux">Instalación local de Mambo / Joomla bajo GNU/Linux</a></li>
    
    <li><a href="/recipe/2005-09-27/acceso-a-red-cmpus-con-firefox-y-greasemonkey">Acceso a Red C@mpus con Firefox y Greasemonkey</a></li>
    
  </ul>
</div>

<div class="recent">
  <h2>recent</h2>
  <ul>
  
    <li><a href="/recipe/2013-09-23/virtualbox-vmdk-to-vdi">Converting .vmdk virtual disk to .vdi format from command line</a></li>
  
    <li><a href="/recipe/2013-09-19/ice35-deb-packages-from-zeroc">Installing the Ice-3.5 packages from ZeroC on Debian</a></li>
  
    <li><a href="/recipe/2013-09-03/DSO">Undertanding the DSO Link Change</a></li>
  
    <li><a href="/recipe/2013-08-11/hp-p1005-debian">HP LaserJet P1005 with Debian and the free driver</a></li>
  
    <li><a href="/recipe/2013-07-10/get-shell-user-without-shell">How to get a shell for a non-shell user</a></li>
  
  </ul>
</div>

</div>

<div class="node span9">
  <div class="page-header">
    <h1>Empaquetar un script Python para Debian (y mantenerlo) </h1>
  </div>

  <div class="row-fluid post-full">
    <div class="span12">
      <div class="content">
	<p>Esta receta explica de forma muy resumida los pasos más importantes para crear y mantener un paquetillo Debian, y cumpliendo la política de Debian.</p>
<p><!--break--></p>
<ul>
	<li><a href="http://crysol.org/node/751">Otras recetas de CRySoL sobre empaquetado Debian</a></li>
</ul>
<h2>Introducción</h2>
<p>Concretamente se explica cómo crear y mantener un paquete Debian muy sencillo utilizando <span class="caps">CDBS</span> (Common Debian Build System). Se trata de un paquete que contiene un script Python y poco más, de modo que probablemente es uno de los más simples que se pueden hacer.</p>
<h2>Ingredientes</h2>
<ul>
	<li>dh-make</li>
	<li>build-essentials</li>
</ul>
<h2>Obteniendo los fuentes</h2>
<p>Aquí hay varias posibilidades. Puedes empaquetar un programa o librería:</p>
<ul>
	<li>Distribuido por otra persona con un típico .tgz</li>
	<li>Descargarlo de un repositorio <span class="caps">CVS</span> o <span class="caps">SVN</span></li>
	<li>Un programa propio</li>
	<li>etc</li>
</ul>
<p>Para seguir la receta vamos a empaquetar <a href="https://arco.inf-cr.uclm.es/svn/public/samples/debian-python-hello/">pyhello</a> (así que se trata del primer caso). En realidad, como habrás adivinado es un ejemplo hecho ex profeso para esta receta. Descarga y descomprime el archivo tal como sigue:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> $ wget https://bitbucket.org/crysol_org/samples/get/tip.tar.gz</span>
</code></pre></div></div>
<h2>Crear el paquete</h2>
<p>Sea como fuere, debes asegurarte de que tienes los fuentes en un directorio con un nombre similar a <code>pyhello-0.1</code> (hay <a href="http://">normas precisas</a><a href="http://www.debian.org/doc/debian-policy/ch-controlfields.html#s-f-Package">www.debian.org/doc/debian-policy/ch-controlfields.html#s-f-Package</a> sobre este nombre, que debes cumplir) y un .tgz con el mismo contenido en el directorio padre de ese. A continuación:</p>
<ul>
	<li>Entra en el directorio</li>
	<li>Define el nombre del mantenedor (tú) como variable de entorno ($<span class="caps">DEBFULLNAME</span>)</li>
	<li>Y ejecuta <code>dh_make</code> como se indica</li>
</ul>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">$</span> <span class="nb">cd </span>pyhello-0.1/
<span class="go">pyhello-0.1$ export DEBFULLNAME=&quot;Juan Nadie&quot;</span>
<span class="go">pyhello-0.1$ dh_make -f ../pyhello-0.1.tar.gz -e juan.nadie@loquesea.es -b -c gpl</span>
<span class="go">Maintainer name : Juan Nadie</span>
<span class="go">Email-Address   : juan.nadie@loquesea.es</span>
<span class="go">Date            : Mon,  5 Jun 2006 19:07:39 +0200</span>
<span class="go">Package Name    : pyhello</span>
<span class="go">Version         : 0.1</span>
<span class="go">License         : gpl</span>
<span class="go">Type of Package : cdbs</span>
<span class="go">Hit &lt;enter&gt; to confirm:</span>
</code></pre></div></div>
<p><strong>Nota:</strong> Sólo hay que utilizar <code>dh_make</code> cuando se crea el paquete y nunca más.</p>
<p>Cosas que ha hecho <code>dh_make</code>:</p>
<ul>
	<li>Un archivo <code>pyhello-0.1/../pyhello-0.1.orig.tar.gz</code>. Este archivo es el software tal como lo distribuye el autor, lo que se llama <em>upstream</em> y formará parte del paquete Debian de fuentes.</li>
	<li>Un directorio <code>pyhello-0.1/debian</code> con un montón de ficheros que voy a comentar a continuación.</li>
</ul>
<h3>Página <code>man</code></h3>
<p>En Debian todos los paquetes deben tener su página de manual. Si el programa  viene con su página te puedes saltar este paso, pero es esta receta vamos a suponer que no la tiene, que es lo más probable. Para estos casos, <code>dh_make</code> te crea unas plantillas en pyhello-0.1/debian/ que llevan por nombre:</p>
<ul>
	<li>manpage.1.ex</li>
	<li>manpage.sgml.ex</li>
	<li>manpage.xml.ex</li>
</ul>
<p>La primera está en formato nroff y las otras dos en DocBook. Lo más fácil es usar el <span class="caps">XML</span>. Así que renombra el fichero:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> pyhello-0.1$ *mv debian/manpage.xml.ex debian/pyhello.xml* </span>
</code></pre></div></div>
<p>Después la editas convenientemente y borra las otras dos plantillas.</p>
<h3>Licencia</h3>
<p>dh_make ha dejado una plantilla de la licencia que hayas elegido en el fichero <code>pyhello-0.1/debian/copyright</code>. Simplemente rellena los datos que faltan.</p>
<h3>Editar el fichero <code>debian/control</code></h3>
<p>El fichero <code>control</code> dice <strong>qué</strong> es el paquete. A continuación puedes ver como quedaría para nuestro ejemplo, una vez hechos los cambios sobre lo generado por <code>dh_make</code>:</p>
<div>
<div class="highlight"><pre><code class="text">Source: pyhello
Section: utils
Priority: optional
Maintainer: Juan Nadie &lt;juan.nadie@loquesea.es&gt;
Build-Depends: debhelper (&gt;= 5.0.38)
Build-Depends-Indep: cdbs (&gt;= 0.4.43), python-all-dev (&gt;= 2.3.5-11), python-central (&gt;= 0.5.6), docbook-xsl
Standards-Version: 3.7.2
XS-Python-Version: all

Package: pyhello
Architecture: all
Depends: ${python:Depends}
XB-Python-Version: ${python:Versions}
Description: Ejemplo básico de script Python empaquetado en Debian GNU/Linux
 Un script &quot;hola mundo&quot; que sirve únicamente para explicar cómo se
 empaquetan scripts Python en GNU/Linux de forma adecuada.
</code></pre></div></div>
<p>Básicamente debes elegir:</p>
<ul>
	<li><a href="http://">Section</a><a href="http://www.debian.org/doc/debian-policy/ch-archive.html#s-subsections">www.debian.org/doc/debian-policy/ch-archive.html#s-subsections</a></li>
	<li><a href="http://">Priority</a><a href="http://www.debian.org/doc/debian-policy/ch-archive.html#s-priorities">www.debian.org/doc/debian-policy/ch-archive.html#s-priorities</a></li>
	<li>Architecture</li>
</ul>
<h3>Editar el fichero <code>debian/rules</code></h3>
<p>El fichero <code>rules</code> es realmente un <code>Makefile</code> e indica <strong>cómo</strong> hacer todas las tareas relacionadas con el paquete: compilación, instalación, limpieza, etc. Este fichero solía tener un tamaño y complejidad considerable, incluso para un paquete tan simple como éste. Pero con la llegada de <span class="caps">CDBS</span>, todo es mucho más sencillo. Así quedaría en este caso:</p>
<div>
<div class="highlight"><pre><code class="text">#!/usr/bin/make -f

DEB_PYTHON_SYSTEM=pycentral
DBK2MAN_XSL=/usr/share/xml/docbook/stylesheet/nwalsh/manpages/docbook.xsl

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/python-distutils.mk

build/pyhello::
	xsltproc --nonet $(DBK2MAN_XSL) debian/pyhello.xml

install/pyhello::
        mv $(CURDIR)/debian/pyhello/usr/bin/pyhello.py $(CURDIR)/debian/pyhello/usr/bin/pyhello

clean::
	-rm pyhello.1
</code></pre></div></div>
<p>El <strong>mv</strong> se debe a que la política de Debian no permite que haya programas con extensión en los directorios <code>bin</code>, que es donde va a ir a parar el script.</p>
<h3>El fichero <code>setup.py</code></h3>
<p>En este ejemplo estamos utilizando <code>distutils</code>, que simplifica mucho las cosas (aprovechando que <span class="caps">CDBS</span> ofrece soporte específico). <a href="http://docs.python.org/lib/module-distutils.html">distutils</a> es un sistema para construir e instalar módulos Python. El <code>rules</code> era tan sencillo porque delega parte de la tarea de la instalación en <code>distutils</code>. Para usarlo simplemente hay que escribir un fichero <code>setup.py</code> muy sencillo y colocarlo en el directorio <code>pyhello-0.1/</code>:</p>
<div>
<div class="highlight"><pre><code class="python"><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&#39;pyhello&#39;</span><span class="p">,</span>
      <span class="n">version</span>      <span class="o">=</span> <span class="s">&#39;0.1&#39;</span><span class="p">,</span>
      <span class="n">description</span>  <span class="o">=</span> <span class="s">&#39;Ejemplo básico de script Python empaquetado en Debian&#39;</span><span class="p">,</span>
      <span class="n">author</span>       <span class="o">=</span> <span class="s">&#39;Fulanito Mengano&#39;</span><span class="p">,</span>
      <span class="n">author_email</span> <span class="o">=</span> <span class="s">&#39;&lt;FulanitoMengano@gmain.com&gt;&#39;</span><span class="p">,</span>
      <span class="n">url</span>          <span class="o">=</span> <span class="s">&#39;https://arco.inf-cr.uclm.es/svn/public/prj/debian-python-hello/&#39;</span><span class="p">,</span>
      <span class="n">license</span>      <span class="o">=</span> <span class="s">&#39;GPL v2 or later&#39;</span><span class="p">,</span>
      <span class="n">data_files</span>   <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;share/man/man1&#39;</span><span class="p">,[</span><span class="s">&#39;pyhello.1&#39;</span><span class="p">])],</span>
      <span class="n">scripts</span>      <span class="o">=</span> <span class="p">[</span><span class="s">&#39;pyhello.py&#39;</span><span class="p">]</span>
      <span class="p">)</span>
</code></pre></div></div>
<h2>Generar el paquete &#8216;binario&#8217;</h2>
<p>Ejecuta:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> pyhello-0.1$ *dpkg-buildpackage -rfakeroot* </span>
</code></pre></div></div>
<p>Si la compilación del paquete ha funcionado sin problemas, habrán aparecido varios ficheros en el directorio &#8220;<tt>pyhello-0.1/..</tt>&#8221;. Por lo menos deberías tener los siguientes:</p>
<table>
<tr>
  <td>pyhello-0.1-1.all.deb </td><td> - El paquete Debian binario (listo para instalar)</td>
</tr>
<tr>
  <td>pyhello-0.1-1.diff.gz </td><td> - Todos los cambios respecto al archivo <em>orig</em></td>
</tr>
<tr>
  <td>pyhello-0.1-1.dsc </td><td> - Resumen del paquete con MD5 para el <em>orig</em> y el diff</td>
</tr>
<tr>
  <td>pyhello-0.1-1_i386.changes </td><td> - Los cambios que has hecho en esta versión</td>
</tr>
<tr>
  <td>pyhello-0.1.orig.tar.gz </td><td> - Lo que distribuye el autor del programa (<em>upstream</em>)</td>
</tr>
</table>
<h2>Verificación</h2>
<p>Una vez creado, debes comprobar que todo es correcto, es decir:</p>
<ul>
	<li>Que instala correctamente (con <code>dpkg -i</code>)</li>
	<li>Que tiene los ficheros necesarios y ninguno más (con <tt>mc</tt> o <code>lesspipe</code>)</li>
	<li>Que cumple la <em>policy</em> de Debian (con <code>lintian</code> y <code>linda</code>)</li>
</ul>
<h2>Limpieza</h2>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> pyhello-0.1$ fakeroot debian/rules clean </span>
</code></pre></div></div>
<h2>Mantenimiento básico</h2>
<p>Una vez terminado el paquete, lo lógico es distribuirlo de algún modo, ya sea como parte de Debian, en un repositorio de paquetes no-oficial o incluso en tu propia página web.</p>
<p>En cualquier caso, debes tener claro un principio universal: &#8220;no hay nada definitivo&#8221;. Es decir, que más tarde o más temprano tendrás que hacer cambios en el paquete, ya sea para adoptar los cambios que el autor haga en su programa o para arreglar bugs cometidos por él o por ti (no es relevante que el autor y el mantenedor sean la misma persona). También puede que a los simpáticos Debian Developers les dé por hacer cambios en la <em>policy</em>.</p>
<h3>Cerrar un bug</h3>
<p>Como mantenedor del paquete serás responsable de solucionar los problemas que seguro tendrá el paquete. Estos problemas pueden ser errores de empaquetado, de aplicación de la política o también errores en la codificación del propio programa (que deberías notificar al autor).</p>
<p>En estos casos, debes solucionar el problema y crear una nueva revisión del paquete, para eso ejecuta:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> pyhello-0.1$ dch -i </span>
</code></pre></div></div>
<p>Después edita el <code>debian/changelog</code> y escribe una breve descripción de cómo has solucionado el error. Si se trata de un paquete oficial, deberás utilizar el <a href="http://www.debian.org/Bugs/"><span class="caps">DBTS</span>(Debian Bug Tracking System</a>, en el que cada bug notificado tiene un número asociado. Cuando resuelve el problema debes citar ese número con algo como &#8220;Closes: #5432&#8221;. Todo esto, también está <a href="http://sdn.vlsm.org/share/Debian-Doc/debian-policy/ch-source.html#s-dpkgchangelog">&#8220;legislado&#8221;</a> en Debian.</p>
<h3>Nueva versión del &#8216;upstream&#8217;</h3>
<p>La otra tarea importante que realiza un mantenedor es empaquetar las nuevas versiones que produce el autor (lo que se llama <em>upstream</em>). En este caso se procede de modo similar a cuando se creó el paquete: se copia el .tgz de rigor en el directorio padre del directorio de los fuentes y se ejecuta:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> pyhello-0.1$ uupdate -u pyhello-0.2.tar.gz </span>
</code></pre></div></div>
<p>Como en el caso anterior, deberías editar el fichero <code>debian/changelog</code> y explicar la jugada, normalmente algo del tipo &#8220;New uptream release&#8221; o similar.</p>
<h2>Comentarios</h2>
<p>No pretendo que esto sea una guía completa para crear paquetes, ¡eso es imposible! y para eso ya está la documentación oficial de referencia. Sólo pretendo que sea un punto de partida para quién quiera empaquetar sus programillas, y ¿por qué no? quizá para despertar el gusanillo de quien quiera ayudar a Debian manteniendo algún paquetillo que esté huerfanito. Si tienes alguna duda o crees que se me ha pasado algo importante, deja un comentario. Yo estoy empezando con esto, no soy ningún experto, así que entre todos igual hasta podemos aprender algo.</p>
<h2>Relacionado<br />
<p></h2>
<h3>Paquetería Debian</h3>
<ul>
	<li>&#8220;Debian New Maintainers&#8217; Guide &quot;:http://<a href="http://www.debian.org/doc/manuals/maint-guide/index.en.html">www.debian.org/doc/manuals/maint-guide/index.en.html</a> | <a href="http://">es</a><a href="http://www.debian.org/doc/manuals/maint-guide/index.es.html">www.debian.org/doc/manuals/maint-guide/index.es.html</a></li>
	<li><a href="https://perso.duckcorp.org/duck/cdbs-doc/cdbs-doc.xhtml"><span class="caps">CDBS</span> Documentation</a></li>
	<li><a href="http://wiki.debian.org/HowToPackageForDebian">HowToPackageForDebian</a></li>
	<li><a href="http://">Manuales del <span class="caps">DDP</span> para desarrolladores</a><a href="http://www.debian.org/doc/devel-manuals.es.html">www.debian.org/doc/devel-manuals.es.html</a></li>
	<li><a href="http://">Debian Package Build Tools</a><a href="http://www.eyrie.org/~eagle/notes/debian/build-tools.html">www.eyrie.org/~eagle/notes/debian/build-tools.html</a></li>
	<li><a href="http://soleup.eup.uva.es/mario/post/1/446"><span class="caps">HOWTO</span> Crear paquetes .deb y mirror debian</a></li>
	<li><a href="http://">Debian Policy Manual</a><a href="http://www.debian.org/doc/debian-policy/">www.debian.org/doc/debian-policy/</a></li>
	<li><a href="http://xarxantoni.net:8080/mediawiki/index.php/Creaci%C3%B3n_de_paquetes_Debian">Creación de paquetes Debian</a></li>
	<li><a href="http://shakaran.es/blog/2009/08/crear-paquetes-deb-de-codigo-python-en-ubuntu/">Crear paquetes <span class="caps">DEB</span> de código Python en Ubuntu</a></li>
</ul>
<h3>Python</h3>
<ul>
	<li><a href="http://">Debian Python Policy</a><a href="http://www.debian.org/doc/packaging-manuals/python-policy/">www.debian.org/doc/packaging-manuals/python-policy/</a></li>
	<li><a href="http://python-modules.alioth.debian.org/">Python Modules Packaging Team</a></li>
</ul>
      </div>

      

      <hr/>

      <div class="pagination pagination-centered">
  <ul>
    
      <li class="prev"><a href="/opinion/2007-03-15/dot-net-club-dont-set-club" title="Dot Net Club  (don't set club)">&larr; Previous</a></li>
    

    <li><a href="/archive.html">Archive</a></li>

    
      <li class="next"><a href="/art/2007-03-16/nueva-camisetilla" title="Nueva camisetilla...">Next &rarr;</a></li>
    
  </ul>
</div>


      <hr/>

      

<div id="show_comments"> [ <a onclick="show_comments();"> show comments </a> ] </div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'crysol'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </div>
  </div>
</div>


	</div>
      </div>

      <hr/>

      <footer>
        <p>&copy; 2013 CRySoL
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
	  See <a href="https://github.com/CRySoL/CRySoL.github.io" target="_blank">site sources</a>.
	  <br/>
	  Generated at Tue Oct 01 22:57:41 +0200 2013
	</p>
      </footer>

    </div>

    
  </body>
</html>

