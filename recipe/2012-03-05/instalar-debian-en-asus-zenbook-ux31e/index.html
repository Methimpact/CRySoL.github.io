
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Instalar Debian en Asus ZenBook UX31E</title>
    
    <meta name="author" content="CRySoL">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
<!--
	  <a class="brand-image" href="/"><img class="brand-image" src="/assets/themes/twitter/logo.png"/></a>
-->
          <a class="brand" href="/">CRySoL</a>
          <ul class="nav">
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/recipes.html">Recipes</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/users.html">Users</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="row-fluid">
	<div class="content">
          
<div class="sidebar span3">
  <div id="logo">
  <a href="/">
    <img src="/assets/images/logo.png" alt="logo"/>
  </a>
</div>

  <div class="metadata">
  <h2>this</h2>
  <ul>
    
      <li>author: 
  <a href="/users.html#paco">
   paco
  </a>


        
        <span class="author-photo">

  
    <img src="https://securecdn.disqus.com/1372120184/images/noavatar48.png" width="48" alt="no-picture"/>
  

</span>

      </li>
      
      
    

    <li>created: 2012-03-05 </li>

    <li><a href="https://github.com/CRySoL/web.source/raw/master/_posts/migrated/2012-03-05-instalar-debian-en-asus-zenbook-ux31e.html">source / <a href="https://github.com/CRySoL/web.source/edit/master/_posts/migrated/2012-03-05-instalar-debian-en-asus-zenbook-ux31e.html">edit</a></li>

  
    <li>categories:
    
      <a href="/categories.html#recipe-ref">recipe</a>
    
    </li>
  

  
      <li>migrated&nbsp;from&nbsp;<a href="http://crysol.org/node/1569">node/1569</a></li>
  

  
    <li>tags:
    
      <a href="/tags.html#Debian-ref">Debian</a>
    
    </li>
  
  </ul>

  
     
     
  

  
     
     
     <a class="tag-icon" href="/tags.html#Debian-ref">
        <img src="http://crysol.org/files/category_pictures/debian.png" title="Debian" alt="Debian-icon"/>
     </a>
     
  

  <!-- AddThis Button BEGIN -->
<div class="share addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Button END -->

</div>

<div class="related">
  <h2>related</h2>

  <ul>
   
   
      
        
          
          <li><a href="/recipe/2013-10-12/apt-pinning">Debian apt pinning</a></li>
        
      
        
          
          <li><a href="/recipe/2013-09-19/ice35-deb-packages-from-zeroc">Installing the Ice-3.5 packages from ZeroC on Debian</a></li>
        
      
        
          
          <li><a href="/recipe/2013-08-11/hp-p1005-debian">HP LaserJet P1005 with Debian and the free driver</a></li>
        
      
        
          
          <li><a href="/recipe/2013-06-20/configure-wireless-rtl8723ae">Configurar tarjeta Realtek 8723AE en Debian</a></li>
        
      
        
          
          <li><a href="/recipe/2013-05-22/fallo-de-pdflatex-en-debian-sid">Fallo de pdflatex en debian sid</a></li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
   
  </ul>

  
</div>

<div class="recent">
  <h2>recent</h2>
  <ul>
  
    <li><a href="/recipe/2013-11-15/reading-a-property-file-with-augeas">Reading a properties file with augeas</a></li>
  
    <li><a href="/recipe/2013-10-28/file-grain-sudo">Fine-grain sudo</a></li>
  
    <li><a href="/recipe/2013-10-21/git-remove-from-history">git: removing files from history</a></li>
  
    <li><a href="/recipe/2013-10-15/virtualbox-compact-vmdk-images">Compacting .vmdk virtual disk with VirtualBox</a></li>
  
    <li><a href="/recipe/2013-10-12/apt-pinning">Debian apt pinning</a></li>
  
  </ul>
</div>

</div>

<div class="node span9">
  <div class="page-header">
    <h1>Instalar Debian en Asus ZenBook UX31E </h1>
  </div>

  <div class="row-fluid post-full">
    <div class="span12">
      <div class="content">
	No me gusta el MacBook Air. Es un producto típico de Apple:

<!--break-->


<ul>
<li> No tiene puerto VGA, solo un puerto thunderbolt, y se incluye adaptador DVI. Tal y como viene de la caja no me sirve para nada, necesito al menos el cablecito thunderbolt-VGA.</li>
<li> No puede reemplazarse la batería. Utiliza tornillos tork de seguridad.</li>
<li> No tiene soporte de USB 3.0. Todo al formato propietario de Apple, thunderbolt.</li>
<li> Aparte de ser sensiblemente más caro, como mínimo para ser útil necesita: displayport-VGA (30€), displayport-HDMI (40€). Un simple cable thunderbolt son 40€. Un disco thunderbolt de 1TB 430€. ¿Y si quieres poner un disco USB3?</li>
<li> Es un producto Apple, con todo lo que eso conlleva. Su ejército de abogados se encargarán de que nunca haya libre competencia.</li>
</ul>

El Asus UX31 es un Air bien hecho:

<ul>
<li>USB 2.0, USB 3.0, HDMI y VGA. Todo estándar, pero con los conectores más pequeños posible (mini-VGA y mini-HDMI).</li>
<li>Incluye lo necesario: Dongle USB Ethernet y cable mini-VGA.</li>
<li>Usan tornillos tork, pero no de seguridad, para que puedas abrirlo con normalidad. ¿Cómo si no vas a cambiar el disco SSD o la batería?</li>
<li>El sonido 5.1 a través de HDMI es excelente. Puedo usarlo con mi tele sin tener que comprar otro cacharro a Apple.</li>
<li>Tiene una pantalla mucho mejor 1600x900, en lugar del extraño 1400x900 de Apple. Nótese que el Asus respeta el factor de forma de HDTV.</li>
</ul>

Por supuesto tienen ya su demanda de Apple. Todo lo que sea por evitar la competencia.

<h2>Preparación</h2>

Antes de instalar Debian lee bien toda la receta. Si no realizas los pasos previos puedes acabar teniendo que abrir el ordenador para sacar la batería. Eso es un fastidio por dos razones: primero porque necesitas un destornillador tork pequeñito, que seguro que no tienes a mano. Segundo porque me temo que si lo abres pierdes la garantía.

<h3>Actualizar la BIOS</h3>

Bajate de Asus la última actualización de la BIOS. Se puede instalar desde el propio menú de la BIOS. Yo la descargué de <a href="http://support.asus.com/download/download_item_mkt.aspx?model=UX31E">aquí</a>. Elige OS <em>Others</em> y de ahí descarga la última BIOS (yo descargué la 211). Grábala en una memoria USB.

Arranca el portátil pulsando F2 (o Esc) y una vez en la BIOS ve a las opciones avanzadas y de ahí a <em>Enter Setup</em>. La opción <em>Easy Flash</em> te permite elegir el archivo con la última BIOS para actualizar. Asegurate de que está enchufado a la corriente durante todo el proceso. Te aseguro que no te gustaría que se quedara sin batería en medio de la actuaización.

<h3>Baja la Businesscard de Debian testing amd64</h3>

Yo bajé mi copia de <a href="http://cdimage.debian.org/cdimage/daily-builds/daily/arch-latest/amd64/iso-cd/">aquí</a> y la grabé en una memoria USB utilizando <em>unetbootin</em> en otro ordenador con Debian GNU/Linux. 

<b>¡Importante! No uses la netinstall de momento, porque actualmente tiene <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=674100">un bug</a> que impide progresar la instalación más allá del sistema base.</b>

<h3>Configuración de la BIOS</h3>

Desactiva en la BIOS la opción VT-d. Parece que esto evita algún problema, aunque tengo que decir que a mi nunca me pasó nada teniendo activa esa opción.

En el menu de salida de la BIOS puedes elegir la memoria USB como dispositivo de arranque temporal.

<h2>Instalar Debian</h2>

Instalar Debian no es inmediato porque actualmente el kernel del <em>Debian Installer</em> no soporta el dongle USB Ethernet que se incluye con el Asus. Si te puedes apañar con la WiFi (es una Atheros) no habrá problemas. Si no te puedes apañar te sugiero que pidas prestado durante un rato otro dongle más antiguo.

En la instalación elige lo mínimo (Laptop), ya te ocuparás luego de seguir instalando cuando tengas un kernel más nuevo.

Cuando la instalación termine arrancará con un kernel más decente (3.2). Edita /etc/default/grub y cambia GRUB_CMDLINE_LINUX para que contenga <b>i915.i915_enable_rc6=1 i915.semaphores=1</b>. Actualiza el archivo grub.cfg ejecutando <b>update-grub</b>.

Edita un nievo archivo en /etc/pm/sleep.d/20_zenbook con lo siguiente.

<pre>
EHCI_BUSES="0000:00:1a.0 0000:00:1d.0"
case "${1}" in
    hibernate|suspend)
        # Switch USB buses off
        for bus in $EHCI_BUSES; do
            echo -n $bus > /sys/bus/pci/drivers/ehci_hcd/unbind
        done
        ;;
    resume|thaw)
        # Switch USB buses back on
        for bus in $EHCI_BUSES; do
            echo -n $bus > /sys/bus/pci/drivers/ehci_hcd/bind
        done
        ;;
esac
</pre>

Edita un nuevo archivo en /etc/pm/power.d/zenbook.sh con lo siguiente. Está sacado de la primera referencia pero algunas rutas están cambiadas para reflejar las que tiene un Zenbook UX31e de ahora.

<pre>
case $1 in
        true)
                echo 1500 > /proc/sys/vm/dirty_writeback_centisecs
                echo auto > /sys/bus/usb/devices/3-1.7/power/level
                echo auto > /sys/bus/usb/devices/3-1.8/power/level
                echo auto > /sys/bus/pci/devices/0000:02:00.0/power/control
                echo auto > /sys/bus/pci/devices/0000:00:1f.2/power/control
                echo auto > /sys/bus/pci/devices/0000:00:1d.0/power/control
                echo auto > /sys/bus/pci/devices/0000:00:00.0/power/control
                echo auto > /sys/bus/pci/devices/0000:00:16.0/power/control
                echo auto > /sys/bus/pci/devices/0000:00:1b.0/power/control
                echo auto > /sys/bus/pci/devices/0000:00:1c.0/power/control
                echo auto > /sys/bus/pci/devices/0000:00:1c.1/power/control
                echo auto > /sys/bus/pci/devices/0000:00:1c.3/power/control
                echo auto > /sys/bus/pci/devices/0000:00:02.0/power/control
                echo min_power > /sys/class/scsi_host/host0/link_power_management_policy
                echo 5 > /sys/bus/pci/devices/0000:00:02.0/backlight/acpi_video0/brightness
                for i in 0 1 2 3; do
                    echo powersave > /sys/devices/system/cpu/cpu${i}/cpufreq/scaling_governor
                done
        ;;
        false)
                echo 9 > /sys/bus/pci/devices/0000:00:02.0/backlight/acpi_video0/brightness
                for i in 0 1 2 3; do
                    echo ondemand > /sys/devices/system/cpu/cpu${i}/cpufreq/scaling_governor
                done
        ;;
esac
exit 0
</pre>

Dale permisos de ejecución a este último.

Ahora puedes ejecutar <em>tasksel</em> como superusuario para completar la instalación. 

<h2>Recompilar el kernel</h2>

<b>¡Actualización!</b> Ya no es necesario recompilar el kernel. Actualmente, con la versión 3.2.0-3-amd64 y la BIOS 212 me funciona todo y no se apaga. De todas formas dejo la sección para los que utilicen distribuciones más antiguas.  Mi BIOS sigue teniendo errores de DSDT, pero no parece que afecten al buen funcionamiento.

Hasta hace poco teníamos que recompilar el kernel para arreglar la DSDT (para que se suspenda correctamente), activar el Bluetooth, y activar el lector de SD. Nada de esto se podía hacer con el kernel por defecto.

Si te aburre todo esto y te fias de mí puedes descargar los paquetes ya compilados desde <a href="http://arco.esi.uclm.es/~francisco.moya/asus/">aquí</a>.

<h3>Descargar el kernel</h3>

Para descargar y compilar seguí los mismos pasos que en <a href="http://wiki.debian.org/OverridingDSDT">esta página</a> salvo por dos añadidos: la modificación del driver de Bluetooth y la activación del driver del lector SD. Todo eso lo explico a continuación pero debe hacerse justo antes de compilar el kernel.

<h3>Arreglar la DSDT</h3>

La DSDT de la BIOS 211 (y la 212) tiene los mismos errores que la DSDT de la BIOS 210. Así que seguí exactamente los mismos pasos que en <a href="http://files.benesovi.eu/ux31e/">esta página</a>.

<h3>Arreglar el módulo para Bluetooth</h3>

Cambié los archivos drivers/bluetooth/btusb.c y drivers/bluetooth/ath3k.c según se describe en <a href="http://thread.gmane.org/gmane.linux.bluez.kernel/18801">este página</a>. Increiblemente todavía en el 3.2.9 no lo han añadido.

Si añades este módulo y suspendes el ordenador verás que deja de funcionar. Se recupera fácilmente haciendo un <em>/etc/init.d/bluetooth restart</em> pero es muy molesto si tienes ratón o teclado Bluetooth (por ejemplo cuando lo usas como mediacenter). De momento lo que yo hago es ejecutar eso precisamente en el <b>/etc/pm/sleep.d/20_zenbook</b> que queda finalmente así:

<pre>
EHCI_BUSES="0000:00:1a.0 0000:00:1d.0"
case "${1}" in
    hibernate|suspend)
        /etc/init.d/bluetooth stop
        # Switch USB buses off
        for bus in $EHCI_BUSES; do
            echo -n $bus > /sys/bus/pci/drivers/ehci_hcd/unbind
        done
        ;;
    resume|thaw)
        # Switch USB buses back on
        for bus in $EHCI_BUSES; do
            echo -n $bus > /sys/bus/pci/drivers/ehci_hcd/bind
        done
        /etc/init.d/bluetooth start
        ;;
esac
</pre>

Si encuentras una solución mejor dímelo.

<h3>Activar el módulo del lector de SD</h3>

Hay que añadir el módulo <em>Staging drivers/Realtek RTS5139</em> que por defecto no se incluye. Puedes añadir al archivo <b>.config</b> la opción siguiente:

<pre>
CONFIG_RTS5139=m
</pre>

<h2>Referencias</h2>

<ul>
<li>Foro de Ubuntu: <a href="https://help.ubuntu.com/community/AsusZenbook">https://help.ubuntu.com/community/AsusZenbook</a></li>
<li>Wiki de ArchLinux: <a href="https://wiki.archlinux.org/index.php/Asus_Zenbook_UX31E">https://wiki.archlinux.org/index.php/Asus_Zenbook_UX31E</a></li>
<li>Wiki de Debian: <a href="http://wiki.debian.org/OverridingDSDT">http://wiki.debian.org/OverridingDSDT</a></li>
<li>Página de Asus: <a href="http://zenbook.asus.com/">http://zenbook.asus.com/</a></li>
</ul>

      </div>

      

      <hr/>

      <div class="pagination pagination-centered">
  <ul>
    
      <li class="prev"><a href="/cooking/2012-02-19/pasta-con-pollo" title="Pasta con pollo">&larr; Previous</a></li>
    

    <li><a href="/archive.html">Archive</a></li>

    
      <li class="next"><a href="/recipe/2012-03-29/separacin-silbica-en-libreoffice" title="Separación silábica en LibreOffice">Next &rarr;</a></li>
    
  </ul>
</div>


      <hr/>

      

<div id="show_comments"> [ <a onclick="show_comments();"> show comments </a> ] </div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'crysol'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </div>
  </div>
</div>


	</div>
      </div>

      <hr/>

      <footer>
        <p>&copy; 2013 CRySoL
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
	  See <a href="https://github.com/CRySoL/web.source" target="_blank">site sources</a>.
	  <br/>
	  Generated at Tue Nov 19 00:57:40 +0100 2013
	</p>
      </footer>

    </div>

    
  </body>
</html>

