
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GNU/Linux y la banda ancha m√≥vil</title>
    
    <meta name="author" content="CRySoL">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
<!--
	  <a class="brand-image" href="/"><img class="brand-image" src="/assets/themes/twitter/logo.png"/></a>
-->
          <a class="brand" href="/">CRySoL</a>
          <ul class="nav">
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/recipes.html">Recipes</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/users.html">Users</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="row-fluid">
	<div class="content">
          
<div class="sidebar span3">
  <div id="logo">
  <a href="/">
    <img src="/assets/images/logo.png" alt="logo"/>
  </a>
</div>

  <div class="metadata">
  <h2>this</h2>
  <ul>
    
      <li>author: 
  <a href="/users.html#int-0">
   int-0
  </a>


        
        <span class="author-photo">

  
    <img src="/assets/files/pictures/picture-8.jpg" width="48" alt="picture"/>
  

</span>

      </li>
      
    

    <li>created: 2006-12-07 </li>

    <li><a href="https://github.com/CRySoL/web.source/raw/master/_posts/migrated/2006-12-07-gnu-linux-y-la-banda-ancha-mvil.html">source / <a href="https://github.com/CRySoL/web.source/edit/master/_posts/migrated/2006-12-07-gnu-linux-y-la-banda-ancha-mvil.html">edit</a></li>

  
    <li>categories:
    
      <a href="/categories.html#recipe-ref">recipe</a>
    
    </li>
  

  
      <li>migrated&nbsp;from&nbsp;<a href="http://crysol.org/node/467">node/467</a></li>
  

  
  </ul>

  
     
     
  

  

  <!-- AddThis Button BEGIN -->
<div class="share addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Button END -->

</div>

<div class="related">
  <h2>related</h2>
  <ul>
    
    <li><a href="/recipe/2005-09-13/ssh-y-scp-para-acceder-a-equipos-remotos-sin-escribir-la-clave-public-key-authentication">SSH y SCP para acceder a equipos remotos sin escribir la clave (public key authentication)</a></li>
    
    <li><a href="/2005-09-24/acabo-de-registrarme-en-el-portal">Acabo de registrarme en el Portal</a></li>
    
    <li><a href="/2005-09-26/buenas-a-tods">Buenas a tod@s!</a></li>
    
    <li><a href="/tale/2005-09-26/instalacin-local-de-mambo-joomla-bajo-gnu-linux">Instalaci√≥n local de Mambo / Joomla bajo GNU/Linux</a></li>
    
    <li><a href="/recipe/2005-09-27/acceso-a-red-cmpus-con-firefox-y-greasemonkey">Acceso a Red C@mpus con Firefox y Greasemonkey</a></li>
    
  </ul>
</div>

<div class="recent">
  <h2>recent</h2>
  <ul>
  
    <li><a href="/recipe/2013-10-12/apt-pinning">Debian apt pinning</a></li>
  
    <li><a href="/recipe/2013-10-10/change-primary-monitor">Changing primary monitor</a></li>
  
    <li><a href="/recipe/2013-10-05/virtualbox-import-export-clone">VirtualBox: import/export and cloning machines</a></li>
  
    <li><a href="/recipe/2013-09-23/virtualbox-vmdk-to-vdi">Converting .vmdk virtual disk to .vdi format from command line</a></li>
  
    <li><a href="/recipe/2013-09-19/ice35-deb-packages-from-zeroc">Installing the Ice-3.5 packages from ZeroC on Debian</a></li>
  
  </ul>
</div>

</div>

<div class="node span9">
  <div class="page-header">
    <h1>GNU/Linux y la banda ancha m√≥vil </h1>
  </div>

  <div class="row-fluid post-full">
    <div class="span12">
      <div class="content">
	<blockquote>Recientemente ha ca√≠do en mis manos un juguetito muy chulo: un kit de conexi√≥n a banda ancha m√≥vil... me he pasado unas cuantas horas peg√°ndome con un sinf√≠n de recetas y m√≥dulos hasta conseguir la dichosa conexi√≥n... que va freshhqu√≠sima... aqu√≠ viene un resumen de mis periplos...</blockquote>

<!--break-->



<h1>Ingredientes</h1>
El kit con el que me he pegado es el <em>Vodafone <a href="http://en.wikipedia.org/wiki/HSPDA">HSPDA</a></em>, con √©l nos podemos conectar indistintamente a redes <em>GPRS</em> o <em>UMTS</em> seg√∫n la calidad de la cobertura que tengamos en nuestra zona y tal. El kit viene con los siguientes elementos:
<ul><li>Tarjeta <em>SIM</em> de 64k</li>
<li>Manuales completamente in√∫tiles</li>
<li>Unos cablecitos USB muy monos</li>
<li>Un m√≥dem 3.5G <em>HUAWEI</em> mod.E220 (muy bonico)</li></ul>

Y en mi PC:
<ul><li>Debian (no pod√≠a ser de otro modo)</li>
<li>Linux 2.6.18-1</li></ul>

¬øTen√©is todo? Pues empecemos...

<h1>La tarjeta SIM</h1>
Aqu√≠ sucede lo siguiente: podemos usar la SIM con su PIN o sin √©l, se supone que ponemos el PIN para que en caso de p√©rdida nadie lo use y tal, pero el PIN tendremos que almacenarlo en un archivo de texto plano a la hora de conectar con lo que la seguridad del PIN no servir√° de mucho. Yo lo tengo desactivado, para desactivarlo podemos usar comandos AT del m√≥dem y tal... o podemos pinchar la SIM en un m√≥vil y desactivarlo ah√≠ :-).

De todas formas explicar√© m√°s adelante como <em>se supone</em> que se debe hacer si tenemos PIN activo.

<h1>El m√≥dem</h1>
Pues nada, cogemos el cable m√°s corto (he le√≠do que con otros cables puede no funcionar) y conectamos el m√≥dem... esperamos unos segundos a que el linux lo detecte y taaach√°n! tenemos detectado un.... ¬ø¬ø¬°¬°Unidad CD-ROM externa!!?? vaaaya... lo montamos y... ¬°los drivers y kits de conexi√≥n para <em>Hassefroch XP</em>! que bien... l√°stima que no podamos borrarlo y usarlo de <em>pen-drive</em> en fins... ignoramos esto y desmontamos la unidad, etc. y hacemos lo siguiente:


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> modprobe usbserial <span class="nv">vendor</span><span class="o">=</span>0x12d1 <span class="nv">product</span><span class="o">=</span>0x1003
</code></pre></div>
</div>

Esto cargar√° el m√≥dulo para adaptadores serie USB, pero hay que indicar expl√≠citamente el identificador el m√≥dem. Para el modelo que indiqu√© son esos, pero pod√©is verificarlo de la siguinte forma:


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">$</span> cat /proc/bus/usb/devices
</code></pre></div>
</div>

Con lo que obtenemos (entre otras cosas):

<pre>T:  Bus=02 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  5 Spd=12  MxCh= 0
D:  Ver= 1.10 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=12d1 ProdID=1003 Rev= 0.00
S:  Manufacturer=HUAWEI Technologies
S:  Product=HUAWEI Mobile
C:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=500mA
I:  If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage
E:  Ad=83(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
E:  Ad=04(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms</pre>

Y ah√≠ tenemos el <em>Vendor</em> y <em>ProdID</em> que busc√°bamos :-).

Ahora debemos crear los dispositivos con los que manejar el m√≥dem (si no se ha hecho autom√°ticamente):


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> mknod /dev/ttyUSB0 c 188 0
<span class="gp">#</span> mknod /dev/ttyUSB1 c 188 1
<span class="gp">#</span> mknod /dev/ttyUSB2 c 188 2
</code></pre></div>
</div>

Ale, ya tenemos acceso al m√≥dem :-) ahora s√≥lo nos queda hablar con √©l...

<h1>Configurar la conexi√≥n</h1>
Bueno, ahora debemos instalar los siguientes programas:


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> apt-get install wvdial
</code></pre></div>
</div>
Yo para probar el modem us√©:


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> apt-get install gnome-ppp minicom
</code></pre></div>
</div>
Con minicom podemos mandar comandillos y gnome-ppp busca y detecta m√≥dems. Si hicimos todos los pasos anteriores y no detectamos m√≥dem, probad a enchufar y desenchufar el USB y ver si con <em>dmesg</em> por fin aparece algo como:

<pre>usbserial_generic 2-1:1.0: generic converter detected
usb 2-1: generic converter now attached to ttyUSB0
usbserial_generic 2-1:1.1: generic converter detected
usb 2-1: generic converter now attached to ttyUSB1</pre>
Si aparece, gnome-ppp ya deber√≠a detectar un m√≥dem, en caso contrario... buscad por los enlaces porque hay algo que est√° fallando...

Ahora configuramos el marcado, esto lo hacemos en <tt>/etc/wvdial.conf</tt>, y lo dejamos como sigue:

<pre># wvdial for Vodacom Data. Created by Tazz_tux
# and adapted by Int-0 for http://crysol.inf-cr.uclm.es
# Version 1.0

# Change Log:
#
# Support only for Vodafone Mobile

[Dialer Defaults]

# Con este numero me funciona a mi:
Phone = *99***1#
# Este numero es el que se marca desde hassefroch XP
# si no os funciona con el anterior, probad este.
#Phone = *99#

Username = vodafone
Password = vodafone
Stupid Mode = 1
Dial Command = ATDT

# Si vuestra tarjeta tiene PIN, lo poneis aqui
[Dialer pin]
Init1 = AT+CPIN=1234

[Dialer vodafone]
Modem = /dev/ttyUSB0
Baud = 460800
Init2 = ATZ
Init3 = ATE0V1&D2&C1S0=0+IFC=2,2
ISDN = 0
Modem Type = Analog Modem

[Dialer internet]
# APN al que nos conectamos
Init5 = AT+CGDCONT=1,"IP","ac.vodafone.es";</pre>

Ya tenemos el archivo listo, si el m√≥dem funcionaba s√≥lo nos queda ejecutar:


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> wvdial vodafone internet
</code></pre></div>
</div>
o tambi√©n (para usar PIN):


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> wvdial pin vodafone internet
</code></pre></div>
</div>
...y ya est√°! estamos conectados por nuestra nueva interfaz <em>ppp0</em>, para finaliza la conexi√≥n s√≥lo pulsad Ctrl+C y finaliz√°is la ejecuci√≥n de wvdial.

<h1>Ap√©ndice A: Comandos del m√≥dem √∫tiles</h1>
Si configur√°is <em>minicom</em> para que use la puerta serie <tt>/dev/ttyUSB0</tt> podemos "hablar" con el m√≥dem y mandar comandillos, estos son unos cuantos √∫tiles que he encontrado por ah√≠ (ni que decir tiene que pod√©is usarlos en el archivo de configuraci√≥n de <em>wvdial</em>). Ahora pondr√© un ejemplo de <em>chat</em> con el m√≥dem, en cursiva est√°n las respuestas que debemos obtener y en negrita los comandos:

<pre><b>ATZ</b>
<em>OK</em>
<b>ATI</b>
<em>Manufacturer: huawei
Model: E220
Revision: 11.110.01.03.00
IMEI: 351827011164648
+GCAP: +CGSM,+DS,+ES

OK</em>
<b>AT+COPS?</b>
<em>+COPS: 0,0,"vodafone ES D",2

OK</em>

<b>at+cpin=xxxx</b>
<em>OK</em>

<b>at+csq</b>
<em>+CSQ: 22,99

OK</em></pre>
El comando <em>AT+COPS?</em> nos da informaci√≥n sobre la red en la que nos encontramos. Con <em>at+csq</em> obtenemos la calidad de la cobertura, cuanto mayor sea el n√∫mero, mejor. El primer n√∫mero (22 en el ejemplo) debe ser mayor de 12 para tener una se√±al aceptable. Los comandos para el manejo del PIN son: <em>at+clck="sc",0,"1234"</em> (donde "1234" es el PIN actual), con esto deshabilitamos el PIN. Con <em>at+clck="sc",1,"1234"</em> lo volvemos a habilitar. Si quer√©is saber m√°s comandos: <a href="http://en.wikipedia.org/wiki/Hayes_command_set">Comandos AT Hayes en wikipedia.</a>

<h1>Ap√©ndice B: Configurar modprobe</h1>
Como es un rollo todo eso del <em>vendorId</em> y tal podemos hacer m√°s simple la carga del m√≥dulo de esta forma: creamos el archivo <tt>/etc/modprobe.d/huawei</tt> con el siguiente contenido:

<pre># Huawei E220
alias huawei usbserial
options huawei vendor=0x12d1 product=0x1003</pre>
Y ahora con <em>modprobe huawei</em> tendremos el m√≥dem funcionando ;-).

<h1>Ap√©ndice C: nozomi</h1>
Bueno, ¬øqu√© es esto de nozomi?... es un modulito que se usa para las conexiones <a href="http://en.wikipedia.org/wiki/HSPDA">HSDPA</a> y que no viene de serie en linux. Se <b>supone</b> que es necesario para hacer funcionar el invento... pero a mi no me ha hecho falta... de todas formas os digo como instalarlo por si a alguno le hace falta. El m√≥dulo no compila con 2.6.18 y no hay parche hasta la fecha (aunque el bug si est√° abierto). En Debian se supone que se podr√≠a hacer:


<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> m-a ai nozomi
</code></pre></div>
</div>
Pero como ya os dije no compila, as√≠ que deb√©is descargaros los fuentes, parchearlos y compilarlos, descargadlo de <a href="http://www.insync.za.net/3g_docs/">http://www.insync.za.net/3g_docs/</a>. Lo descomprim√≠s (usad <em>unp</em> y listo) y ahora edit√°is <tt>nozomi.c</tt> y modificad lo siguiente:

Comentad las l√≠neas 972 a 987 (no os preocup√©is, se trata de una comprobaci√≥n que en los 2.6.18 ya no hay que hacerla, es autom√°tica):
<pre>/*     if (test_bit(TTY_DONT_FLIP, &tty->flags)) { */
/*         D6("TTY_DONT_FLIP set!! %d", index); */
/*         /\* Here we disable interrupt for that port and schedule *\/ */
/* /\* 		task. Task wakes up a little bit later and enables interrupt.. *\/ */
/*         port->tty_dont_flip = 1; */
/*         disable_transmit_dl(index, dc); */
/* #ifdef KERNEL_2_4 */
/*         schedule_task(&dc->tty_flip_queue); */
/* #endif */
/* #ifdef KERNEL_2_6 */
/*         if (!queue_work(dc->tty_flip_wq, &dc->tty_flip_wq_struct)) { */
/*             ERR("Call to queue_work() failed."); */
/*         } */
/* #endif */
/*         return 0; */
/*     } */</pre>
Y ahora modificad la l√≠nea 2183 que tiene lo siguiente:
<pre>td->flags                 = TTY_DRIVER_REAL_RAW | TTY_DRIVER_NO_DEVFS,</pre>
por esto:
<pre>td->flags                 = TTY_DRIVER_REAL_RAW | TTY_DRIVER_DYNAMIC_DEV,</pre>
Y ya os tiene que compilar, la instalaci√≥n deb√©is hacerla a mano.

<h1>Enlaces de inter√©s</h1>

<ul>
<li>
<a href="http://barrapunto.com/journal.pl?op=display&uid=16902&start=10">Instalar una PCMCIA 3G de Vodafone en linux (2¬™ parte)</a></li>
<li>
<a href="http://mybroadband.co.za/vb/printthread.php?t=21726">This is a "howto" to get the 3G cards to work under Linux.</a></li>
<li>
<a href="http://www.pharscape.org/content/view/28/#_Toc83808167">Vodafone 3G (UMTS) Howto</a></li>
<li>
<a href="http://deif.org/informatica/doc_umts.html">C√≥mo configurar una tarjeta UMTS (Vodafone) con n√∫cleo 2.6.xx</a></li>
<li>
<a href="http://www.mybroadband.co.za/vb/showthread.php?p=762590">E220 with Ubuntu</a></li>
</ul>

...y la verdad que hay mucho m√°s... s√≥lo buscad en foros...

Ale... disfrutad... para dudas y correciones ya sab√©is ;-)

      </div>

      

      <hr/>

      <div class="pagination pagination-centered">
  <ul>
    
      <li class="prev"><a href="/recipe/2006-12-06/cmo-indicar-a-x-org-qu-tarjeta-de-vdeo-tienes" title="C√≥mo indicar a X.org qu√© tarjeta de v√≠deo tienes">&larr; Previous</a></li>
    

    <li><a href="/archive.html">Archive</a></li>

    
      <li class="next"><a href="/new/2006-12-11/lo-nuevo-de-emacs22" title="Lo nuevo de emacs22">Next &rarr;</a></li>
    
  </ul>
</div>


      <hr/>

      

<div id="show_comments"> [ <a onclick="show_comments();"> show comments </a> ] </div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'crysol'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </div>
  </div>
</div>


	</div>
      </div>

      <hr/>

      <footer>
        <p>&copy; 2013 CRySoL
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
	  See <a href="https://github.com/CRySoL/web.source" target="_blank">site sources</a>.
	  <br/>
	  Generated at Sat Oct 12 23:50:23 +0200 2013
	</p>
      </footer>

    </div>

    
  </body>
</html>

