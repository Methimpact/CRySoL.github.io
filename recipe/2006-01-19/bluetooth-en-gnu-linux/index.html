
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bluetooth en GNU/Linux</title>
    
    <meta name="author" content="CRySoL">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
<!--
	  <a class="brand-image" href="/"><img class="brand-image" src="/assets/themes/twitter/logo.png"/></a>
-->
          <a class="brand" href="/">CRySoL</a>
          <ul class="nav">
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/recipes.html">Recipes</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/users.html">Users</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="row-fluid">
	<div class="content">
          
<div class="sidebar span3">
  <div id="logo">
  <a href="/">
    <img src="/assets/images/logo.png" alt="logo"/>
  </a>
</div>

  <div class="metadata">
  <h2>this</h2>
  <ul>
    
      <li>author: 
  <a href="/users.html#felix">
   felix
  </a>


        
        <span class="author-photo">

  
    <img src="https://securecdn.disqus.com/1372120184/images/noavatar48.png" width="48" alt="no-picture"/>
  

</span>

      </li>
      
    

    <li>created: 2006-01-19 </li>

    <li><a href="https://github.com/CRySoL/web.source/raw/master/_posts/migrated/2006-01-19-bluetooth-en-gnu-linux.textile">source / <a href="https://github.com/CRySoL/web.source/edit/master/_posts/migrated/2006-01-19-bluetooth-en-gnu-linux.textile">edit</a></li>

  
    <li>categories:
    
      <a href="/categories.html#recipe-ref">recipe</a>
    
    </li>
  

  
      <li>migrated&nbsp;from&nbsp;<a href="http://crysol.org/node/197">node/197</a></li>
  

  
    <li>tags:
    
      <a href="/tags.html#Arco-ref">Arco</a>
    
    </li>
  
  </ul>

  
     
     
  

  
     
     
     <a class="tag-icon" href="/tags.html#Arco-ref">
        <img src="http://crysol.org/files/category_pictures/arco_3D_taxonomy.png" title="Arco" alt="Arco-icon"/>
     </a>
     
  

  <!-- AddThis Button BEGIN -->
<div class="share addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Button END -->

</div>

<div class="related">
  <h2>related</h2>
  <ul>
    
    <li><a href="/recipe/2005-09-13/ssh-y-scp-para-acceder-a-equipos-remotos-sin-escribir-la-clave-public-key-authentication">SSH y SCP para acceder a equipos remotos sin escribir la clave (public key authentication)</a></li>
    
    <li><a href="/2005-09-24/acabo-de-registrarme-en-el-portal">Acabo de registrarme en el Portal</a></li>
    
    <li><a href="/2005-09-26/buenas-a-tods">Buenas a tod@s!</a></li>
    
    <li><a href="/tale/2005-09-26/instalacin-local-de-mambo-joomla-bajo-gnu-linux">Instalación local de Mambo / Joomla bajo GNU/Linux</a></li>
    
    <li><a href="/recipe/2005-09-27/acceso-a-red-cmpus-con-firefox-y-greasemonkey">Acceso a Red C@mpus con Firefox y Greasemonkey</a></li>
    
  </ul>
</div>

<div class="recent">
  <h2>recent</h2>
  <ul>
  
    <li><a href="/recipe/2013-09-23/virtualbox-vmdk-to-vdi">Converting .vmdk virtual disk to .vdi format from command line</a></li>
  
    <li><a href="/recipe/2013-09-19/ice35-deb-packages-from-zeroc">Installing the Ice-3.5 packages from ZeroC on Debian</a></li>
  
    <li><a href="/recipe/2013-09-03/DSO">Undertanding the DSO Link Change</a></li>
  
    <li><a href="/recipe/2013-08-11/hp-p1005-debian">HP LaserJet P1005 with Debian and the free driver</a></li>
  
    <li><a href="/recipe/2013-07-10/get-shell-user-without-shell">How to get a shell for a non-shell user</a></li>
  
  </ul>
</div>

</div>

<div class="node span9">
  <div class="page-header">
    <h1>Bluetooth en GNU/Linux </h1>
  </div>

  <div class="row-fluid post-full">
    <div class="span12">
      <div class="content">
	<blockquote>
<p>Esta receta pretende ser un pequeño tutorial de uso de Bluetooth en <span class="caps">GNU</span>/Linux</p>
</blockquote>
<p>Usaremos básicamente las utilidades instaladas por el paquete bluez-utils empleadas en el desarrollo de aplicaciones bluetooth.</p>
<h2>Ingredientes</h2>
<p>Todos ellos paqutes Debian/Ubuntu</p>
<ul>
	<li><strong>bluetooth</strong>: la pila propiamente dicha</li>
	<li><strong>bluez-pin</strong>: para gestionar los <span class="caps">PIN</span></li>
	<li><strong>bluez-utils</strong>: servidores y utilidades</li>
	<li><strong>bluez-hcidump</strong> sniffer de tráfico <span class="caps">HCI</span></li>
</ul>
<h2>Comandos</h2>
<p>Entre los comandos que nos instalan estos paquetes, puedes encontrar:</p>
<h2>Examinar la interface</h2>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> hciconfig -a
<span class="go">hci0:   Type: USB</span>
<span class="go">        BD Address: 00:08:1B:03:05:25 ACL MTU: 192:8 SCO MTU: 64:8</span>
<span class="go">        UP RUNNING PSCAN ISCAN</span>
<span class="go">        RX bytes:385 acl:0 sco:0 events:18 errors:0</span>
<span class="go">        TX bytes:319 acl:0 sco:0 commands:17 errors:0</span>
<span class="go">        Features: 0xff 0xff 0x0f 0x00 0x00 0x00 0x00 0x00</span>
<span class="go">        Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3</span>
<span class="go">        Link policy: RSWITCH HOLD SNIFF PARK</span>
<span class="go">        Link mode: SLAVE ACCEPT</span>
<span class="go">        Name: &#39;homer&#39;</span>
<span class="go">        Class: 0x3e0100</span>
<span class="go">        Service Classes: Networking, Rendering, Capturing</span>
<span class="go">        Device Class: Computer, Uncategorized</span>
<span class="go">        HCI Ver: 1.1 (0x1) HCI Rev: 0x20d LMP Ver: 1.1 (0x1) LMP Subver: 0x20d</span>
<span class="go">        Manufacturer: Cambridge Silicon Radio (10)</span>
</code></pre></div></div>
<h3>Escaner (usando una iface determinada)</h3>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> $ hcitool -a hci0 scan </span>
</code></pre></div></div>

<h3>Sniffer de <span class="caps">HCI</span></h3>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go"> hcidump </span>
</code></pre></div></div>
<h3>Servidor hci (hcid)</h3>
<p>Su configuración está en <code>/etc/bluetooth/hcid.conf</code> y la base de datos con los pin en <code>/etc/bluetooth/pinDB</code></p>
<h3>Descubrimiento de servicios</h3>
<p>El demonio del protocolo de descubrimiento de servicios <span class="caps">SDP</span> (Service discovery protocol) es <code>sdpd</code></p>
<h3>Gestión de <span class="caps">SDP</span></h3>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> sdptool
<span class="go">sdptool - SDP tool v2.24</span>
<span class="go">Usage:</span>
<span class="go">        sdptool [options] &lt;command&gt; [command parameters]</span>
<span class="go">Options:</span>
<span class="go">        -h              Display help</span>
<span class="go">        -i              Specify source interface</span>
<span class="go">Commands:</span>
<span class="go">        search          Search for a service</span>
<span class="go">        browse          Browse all available services</span>
<span class="go">        records         Request all records</span>
<span class="go">        add             Add local service</span>
<span class="go">        del             Delete local service</span>
<span class="go">        get             Get local service</span>
<span class="go">        setattr         Set/Add attribute to a SDP record</span>
<span class="go">        setseq          Set/Add attribute sequence to a SDP record</span>

<span class="go">Services:</span>
<span class="go">        DID SP DUN LAN FAX OPUSH FTP HS HF SAP NAP GN PANU HID CIP CTP</span>
<span class="go">        A2SRC A2SNK AVRCT AVRTG SR1 SYNCML ACTIVESYNC HOTSYNC PALMOS</span>
<span class="go">        NOKID PCSUITE</span>
</code></pre></div></div>
<p>Es importante resaltar que para que un servicio sea descubierto, debes añadirlo mediante un <code>sdptool add &amp;lt;servicio&gt;</code>, la lista de abajo del comando anterior nos muestra los servicios disponibles.</p>
<h2>Algunos comando útiles</h2>
<p>Con <code>hcitool scan</code> obtendrás una lista de los dispositivos presentes a tu alrededor.</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">$</span> hcitool scan
<span class="go">Scanning ...</span>
<span class="go">        00:15:A0:42:34:8D       Nokia 6680</span>
</code></pre></div></div>
<p>Muestra la dirección bluetooth y el nombre, puedes comprobar la dirección bluetooth en los nokia 66** tecleando el código &#8220;*#2820#&#8221;</p>
<p>Para obtener una lista de los servicios que ofrece cada dispositivo usamos la herramienta sdptool, en nuestro caso, y para ver lo que ofrece el móvil:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> sdptool browse 00:15:A0:42:34:8D

<span class="go">Browsing 00:15:A0:42:34:8D ...</span>
<span class="go">Service Name: Hands-Free Audio Gateway</span>
<span class="go">Service RecHandle: 0x10003</span>
<span class="go">Service Class ID List:</span>
<span class="go">  &quot;Handfree Audio Gateway&quot; (0x111f)</span>
<span class="go">  &quot;Generic Audio&quot; (0x1203)</span>
<span class="go">Protocol Descriptor List:</span>
<span class="go">  &quot;L2CAP&quot; (0x0100)</span>
<span class="go">  &quot;RFCOMM&quot; (0x0003)</span>
<span class="go">    Channel: 2</span>
<span class="go">Language Base Attr List:</span>
<span class="go">  code_ISO639: 0x454e</span>
<span class="go">  encoding:    0x6a</span>
<span class="go">  base_offset: 0x100</span>
<span class="go">Profile Descriptor List:</span>
<span class="go">  &quot;Handfree Audio Gateway&quot; (0x111f)</span>
<span class="go">    Version: 0x0101</span>

<span class="go">Service Name: Headset Audio Gateway</span>
<span class="go">Service RecHandle: 0x10004</span>
<span class="go">Service Class ID List:</span>
<span class="go">  &quot;Headset Audio Gateway&quot; (0x1112)</span>
<span class="go">  &quot;Generic Audio&quot; (0x1203)</span>
<span class="go">Protocol Descriptor List:</span>
<span class="go">  &quot;L2CAP&quot; (0x0100)</span>
<span class="go">  &quot;RFCOMM&quot; (0x0003)</span>
<span class="go">    Channel: 3</span>
<span class="go">Language Base Attr List:</span>
<span class="go">  code_ISO639: 0x454e</span>
<span class="go">  encoding:    0x6a</span>
<span class="go">  base_offset: 0x100</span>
<span class="go">Profile Descriptor List:</span>
<span class="go">  &quot;Headset&quot; (0x1108)</span>
<span class="go">    Version: 0x0100</span>

<span class="go">...todos los servicios</span>
</code></pre></div></div>
<p>Esto proporciona toda la información que necesitas acerca de todos los servicios presentes en el dispositivo, en este caso el teléfono móvil.</p>
<h2>Servicio dial-up networking</h2>
<p>Nos vamos a centrar en el servicio dial-up networking, para ello observamos que la salida del comando anterior nos presenta la siguiente información:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go">Service Name: Dial-Up Networking</span>
<span class="go">Service RecHandle: 0x1000e</span>
<span class="go">Service Class ID List:</span>
<span class="go">  &quot;Dialup Networking&quot; (0x1103)</span>
<span class="go">Protocol Descriptor List:</span>
<span class="go">  &quot;L2CAP&quot; (0x0100)</span>
<span class="go">  &quot;RFCOMM&quot; (0x0003)</span>
<span class="go">    Channel: 3</span>
<span class="go">Language Base Attr List:</span>
<span class="go">  code_ISO639: 0x454e</span>
<span class="go">  encoding:    0x6a</span>
<span class="go">  base_offset: 0x100</span>
<span class="go">Profile Descriptor List:</span>
<span class="go">  &quot;Dialup Networking&quot; (0x1103)</span>
<span class="go">    Version: 0x0100</span>
</code></pre></div></div>
<p>Para indicarle al ordenador que vamos a usar ese servicio necesitas editar el archivos <code>/etc/bluetooth/rfcomm.conf</code> e insertar una entrada tal que:</p>
<div>
<div class="highlight"><pre><code class="text">rfcomm1 {
        bind no;
        device 00:15:A0:42:34:8D;
        channel 3;
        comment &quot;Dial-up networking&quot;;
        }
</code></pre></div></div>
<p>donde el device es el identificador del movil y el channel el que nos indica el registro obtenido con sdptool, justo despues de &#8220;<span class="caps">RFCOMM</span>&#8221; (0&#215;0003).</p>
<p>Reinicia para cargar la nueva configuración:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="gp">#</span> /etc/init.d/bluez-utils restart
<span class="go">Restarting bluez-utils: hcid sdpd rfcomm.</span>

<span class="gp">#</span> rfcomm release 1

<span class="gp">#</span> rfcomm connect 1
<span class="go">Connected /dev/rfcomm1 to 00:15:A0:42:34:8D on channel 10</span>
<span class="go">Press CTRL-C for hangup</span>
</code></pre></div></div>
<p>Ya tienes una conexión lista, con lo cual, por ejemplo, si estas en un portátil en mitad del campo y quieres conectarte a internet con tu<br />
portátil a través de tu móvil tienes que configurar un enlace ppp a través del móvil.</p>
<p>Para eso, tienes comandos muy interesantes:</p>
<ul>
	<li><strong>pand</strong>: <span class="caps">TCP</span>/IP sobre Bluetooth
	<ul>
		<li>&#8212;listen para el servidor</li>
		<li>&#8212;connect <bluetooth_address> para el cliente</li>
	</ul></li>
	<li><strong>/etc/bluetooth/pan/dev-up</strong>: pand ejecuta este script al levantar <span class="caps">TCP</span>/IP.</li>
	<li><strong>dund</strong>: Ejecutar <span class="caps">PPP</span> sobre Bluetooth <span class="caps">RFCOMM</span>
	<ul>
		<li>&#8212;listen para el servidor</li>
		<li>&#8212;connect <bluetooth_address> para el cliente</li>
	</ul></li>
</ul>
<p>Si no has establecido una &#8220;relación de confianza&#8221; entre tu móvil y tu<br />
portátil te pedirá en ambos dispositivos el pin.</p>
<h2>Protocolo <span class="caps">OBEX</span></h2>
<p>Si quieres mandarle un archivo a tu teléfono puedes utilizar el protocolo <span class="caps">OBEX</span>. Con <code>gnome-obex-send</code> puedes mandarle un archivo y con <code>gnome-obex-server</code> debe aparecer una opción en nautilus, de forma que, si haces click en el botón derecho sobre un archivo debería aparecer una opcion para enviarlo via bluetooth.</p>
<h2>Configurando un Headset</h2>
<p>Una interesante aplicación es la de poder usar uno de esos micrófonos y auriculares bluetooth. Estos dispositivos implementan un servicio denominado <strong>headset</strong>.</p>
<p>Para ello existe un interesante proyecto basado en Alsa, lo puedes encontrar en <a href="http://sourceforge.net/projects/bluetooth-alsa/">bluetooth-alsa</a> (no es paquete debian).</p>
<p>Dos errores que surgieron en la configuración son:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go">felix:# btsco</span>
<span class="go">Error: control open (hw:0): No such device</span>
<span class="go">Error: Can&#39;t find device. Bail</span>
</code></pre></div></div>
<p>Esto indica que no tienes configurados los drivers de alsa y no encuentran los dispositivos. Prueba a instalar y ejecutar el alsaconf para instalar alsa.</p>
<p>Otro problema, despues de instalar los drivers de alsa puede ser:</p>
<div class="console">
<div class="highlight"><pre><code class="console"><span class="go">felix:# btsco</span>
<span class="go">Error: hwdep next device (hw:0): Operation not permitted</span>
<span class="go">Error: control open (hw:1): No such device</span>
<span class="go">Error: Can&#39;t find device. Bail</span>
</code></pre></div></div>
<p>No tienes cargado el modulo del kernel <code>snd-bt-sco</code>, está en el directorio <code>kernel</code> del programa <code>btsco</code>, tienes que ejecutar <code>make; make install</code> en dicho directorio.</p>
<p>Si al hacer <code>modprobe snd-bt-sco</code>, no lo encuentra  (y se te ha compilado todo bien) copia el .ko a mano a <code>/lib/modules/2.6.14-2-386/kernel/drivers/</code> poniendo la versión del kernel que tengas (la mia es una 2.6.14-2-386).</p>
<h2>Comentarios</h2>
<p>Esta receta se irá ampliando conforme se prueben mas servicios y utilidades.</p>
<h2>Referencias</h2>
<ul>
	<li><a href="http://sourceforge.net/projects/bluetooth-alsa/">bluetooth-alsa</a></li>
	<li><a href="http://gsyc.escet.urjc.es/~rocapal/documentos/handset-nokia/handset-nokia.html">handset</a></li>
	<li><a href="http://">Bluez</a><a href="http://www.bluez.org/">www.bluez.org/</a></li>
</ul>
      </div>

      

      <hr/>

      <div class="pagination pagination-centered">
  <ul>
    
      <li class="prev"><a href="/tale/2006-01-18/el-reto-del-mes-1-edicin" title=""El reto del mes", 1ª edición">&larr; Previous</a></li>
    

    <li><a href="/archive.html">Archive</a></li>

    
      <li class="next"><a href="/tale/2006-01-19/pap-de-donde-vienen-las-placas-base" title="Papá, ¿de donde vienen las placas base?">Next &rarr;</a></li>
    
  </ul>
</div>


      <hr/>

      

<div id="show_comments"> [ <a onclick="show_comments();"> show comments </a> ] </div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'crysol'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </div>
  </div>
</div>


	</div>
      </div>

      <hr/>

      <footer>
        <p>&copy; 2013 CRySoL
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
	  See <a href="https://github.com/CRySoL/CRySoL.github.io" target="_blank">site sources</a>.
	  <br/>
	  Generated at Wed Oct 02 00:21:25 +0200 2013
	</p>
      </footer>

    </div>

    
  </body>
</html>

