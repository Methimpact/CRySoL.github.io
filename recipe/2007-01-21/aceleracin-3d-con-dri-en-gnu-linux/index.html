
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Aceleración 3D con DRI en GNU/Linux</title>
    
    <meta name="author" content="CRySoL">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
<!--
	  <a class="brand-image" href="/"><img class="brand-image" src="/assets/themes/twitter/logo.png"/></a>
-->
          <a class="brand" href="/">CRySoL</a>
          <ul class="nav">
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/recipes.html">Recipes</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/users.html">Users</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="row-fluid">
	<div class="content">
          
<div class="sidebar span3">
  <div id="logo">
  <a href="/">
    <img src="/assets/images/logo.png" alt="logo"/>
  </a>
</div>

  <div class="metadata">
  <h2>this</h2>
  <ul>
    
      <li>author: 
  <a href="/users.html#int-0">
   int-0
  </a>


        
        <span class="author-photo">

  
    <img src="/assets/files/pictures/picture-8.jpg" width="48" alt="picture"/>
  

</span>

      </li>
      
    

    <li>created: 2007-01-21 </li>

    <li><a href="https://github.com/CRySoL/web.source/raw/master/_posts/migrated/2007-01-21-aceleracin-3d-con-dri-en-gnu-linux.textile">source / <a href="https://github.com/CRySoL/web.source/edit/master/_posts/migrated/2007-01-21-aceleracin-3d-con-dri-en-gnu-linux.textile">edit</a></li>

  
    <li>categories:
    
      <a href="/categories.html#recipe-ref">recipe</a>
    
    </li>
  

  
      <li>migrated&nbsp;from&nbsp;<a href="http://crysol.org/node/515">node/515</a></li>
  

  
  </ul>

  
     
     
  

  

  <!-- AddThis Button BEGIN -->
<div class="share addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Button END -->

</div>

<div class="related">
  <h2>related</h2>
  <ul>
    
    <li><a href="/recipe/2005-09-13/ssh-y-scp-para-acceder-a-equipos-remotos-sin-escribir-la-clave-public-key-authentication">SSH y SCP para acceder a equipos remotos sin escribir la clave (public key authentication)</a></li>
    
    <li><a href="/2005-09-24/acabo-de-registrarme-en-el-portal">Acabo de registrarme en el Portal</a></li>
    
    <li><a href="/2005-09-26/buenas-a-tods">Buenas a tod@s!</a></li>
    
    <li><a href="/tale/2005-09-26/instalacin-local-de-mambo-joomla-bajo-gnu-linux">Instalación local de Mambo / Joomla bajo GNU/Linux</a></li>
    
    <li><a href="/recipe/2005-09-27/acceso-a-red-cmpus-con-firefox-y-greasemonkey">Acceso a Red C@mpus con Firefox y Greasemonkey</a></li>
    
  </ul>
</div>

<div class="recent">
  <h2>recent</h2>
  <ul>
  
    <li><a href="/recipe/2013-09-19/ice35-deb-packages-from-zeroc">Installing the Ice-3.5 packages from ZeroC on Debian</a></li>
  
    <li><a href="/recipe/2013-09-03/DSO">Undertanding the DSO Link Change</a></li>
  
    <li><a href="/recipe/2013-08-11/hp-p1005-debian">HP LaserJet P1005 with Debian and the free driver</a></li>
  
    <li><a href="/recipe/2013-07-10/get-shell-user-without-shell">How to get a shell for a non-shell user</a></li>
  
    <li><a href="/recipe/2013-07-09/puppet-install-latest-package">Ensuring last version of a package with puppet</a></li>
  
  </ul>
</div>

</div>

<div class="node span9">
  <div class="page-header">
    <h1>Aceleración 3D con DRI en GNU/Linux </h1>
  </div>

  <div class="row-fluid post-full">
    <div class="span12">
      <div class="content">
	<p>1. Motivación</p>
<p><!--break--></p>
<p>¿Para qué podemos querer aceleración 3D en nuestro <span class="caps">GNU</span>/Linux? Si, vale, también vale para algo más que para jugar pero bueno. El caso es que la aceleración hardware 3D está bastante avanzada ya pero aún asi las distribuciones (salvo Debian) tienen algo verde este punto.</p>
<p>Para los que gusten de tener el sistema de paquetes impoluto y usen Debian existe una alternativa muy cómoda: paquetes binarios. El único problema es que no tendrán lo último que exista en <span class="caps">DRI</span> (drivers, etc.).</p>
<p>2. El problema</p>
<p>Generalmente no existen drivers para sistemas <span class="caps">GNU</span>/Linux. Además son necesarios dos drivers: uno para el kernel y el otro para las XFree86. Por todo ello, en principio, puede parecer una tarea muy pesada el configurar y compilar todo esto, pero ya veréis como en menos de 30 minutos podemos tener aceleración en nuestro equipo.</p>
<p>3. Hardware soportado</p>
<p>Yo lo he hecho en una Savage mobity, en una <span class="caps">ATI</span> M1, en una <span class="caps">ATI</span> <span class="caps">RADEON</span> 9200 Mobility, en una Intel82852. Si quereis buscar vuestra tarjeta podeis hacerlo en: <a href="http://dri.sourceforge.net/cgi-bin/moin.cgi/Status">http://dri.sourceforge.net/cgi-bin/moin.cgi/Status</a> Para las <span class="caps">NVIDIA</span>, lo siento, tendreis que usar nvidia-glx (que a mi personalmente no me gusta nada). Hay un mini-doc al respecto. Para las <span class="caps">ATI</span>, existe un driver muy bueno, FireGL de <span class="caps">ATI</span> pero yo prefiero usar <span class="caps">DRI</span>.</p>
<p>4. Un alto precio</p>
<p>No me refiero a dinero material. Instalar esto de la forma en que ahora explicaré implica saltarse a la torera el sistema de paquetes de la distribución que tengamos entre manos ya que sustituiremos las XFree de nuestra distro por las XFree que nos vamos a hacer nosotros. El problema que tengo yo con esto es que cuando actualizo el sistema y se me actualizan paquetes del XFree o del Mesa pues me toca actualizar los fuentes, recompilar y reinstalar todo. De todas formas&#8230; ¿cada cuanto se actualiza el paquete XFree? pues eso, vosotros mismos&#8230; Tambien puede que tengamos que sustituir librerias de paquetes como Mesa por los que vamos a crear nosotros, ya explicaré como hacer esto mas adelante.</p>
<p>5. Obtener XFree86 (<span class="caps">DRI</span> trunk), <span class="caps">DRM</span> y <span class="caps">MESA</span></p>
<p>Tenemos que bajarnos todo esto, lo haremos directamente del repositorio <span class="caps">CVS</span>, asi tendremos siempre lo último. Lo vamos a poner todo en /usr/src (es <span class="caps">MUY</span> importante respetar el árbol de directorios). Yo suelo hacerlo en 3 consolas a la vez para no estar esperando.</p>
<p>Usaremos el acceso anónimo, es decir, cuando pida password pulsais &#8220;enter&#8221; y ya está (da una especie de error pero no os preocupéis), empezamos con XFree (<span class="caps">DRI</span> trunk):<br />
$ cd /usr/src<br />
$ mkdir dri<br />
$ cd dri<br />
$ cvs -d:pserver:anonymous@pdx.freedesktop.org:/cvs/dri login<br />
$ cvs -z3 -d:pserver:anonymous@pdx.freedesktop.org:/cvs/dri co xc</p>
<p>Ahora las librerias Mesa:<br />
$ cd /usr/src<br />
$ mkdir mesa<br />
$ cd mesa<br />
$ cvs -d:pserver:anonymous@pdx.freedesktop.org:/cvs/mesa login<br />
$ cvs -z3 -d:pserver:anonymous@pdx.freedesktop.org:/cvs/mesa co Mesa</p>
<p>Y finalmente el <span class="caps">DRM</span> del kernel (tranquilos, si teneis el soporte agpgart en vuestro núcleo, que es lo normal ahora, no tenéis que tocar el núcleo. En caso contrario id buscando documentación sobre como añadirlo):<br />
$ cd /usr/src<br />
$ mkdir drm<br />
$ cd drm<br />
$ cvs -d:pserver:anonymous@cvs.freedesktop.org:/cvs/dri login<br />
$ cvs -z3 -d:pserver:anonymous@cvs.freedesktop.org:/cvs/dri co drm</p>
<p>Bien, ahora vamos a configurarlo, para ello tenemos que editar el fichero /usr/src/dri/xc/xc/config/cf/cf/host.def y cambiaremos lo siguiente:<br />
#define MesaSrcDir /usr/src/mesa/Mesa<br />
#define DRMSrcDir /usr/src/drm/drm</p>
<p>Ahora una ventaja de usar <span class="caps">DRI</span> que no tienen otros drivers: si nuestro procesador tiene el juego de instrucciones <span class="caps">SSE</span> (cosa muy probable) podemos compilar optimizando el código para que las use, consiguiendo un 20% o 30% más de rendimiento en la aceleración. Para saber si nuestro procesador aguanta esto podéis ejecutar:<br />
$ cat /proc/cpuinfo</p>
<p>Ahí veréis los juegos de instrucciones que tiene vuestra <span class="caps">CPU</span>, si veis <span class="caps">SSE</span> pues enhorabuena&#8230; añadid la siguiente linea al archivo /usr/src/dri/xc/xc/config/cf/cf/host.def:<br />
#define MesaUseKatmai <span class="caps">YES</span></p>
<p>Antes de compilar vamos a crear un directorio donde se crearán todos los archivos de compilación. Esto no es obligatorio pero es mas &#8220;elegante&#8221; y a la larga más cómodo. La forma de hacerlo es muy simple:<br />
$ cd /usr/src/dri<br />
$ ln -s xc XFree40<br />
$ mkdir build<br />
$ cd build<br />
$ lndir -silent -ignorelinks ../XFree40</p>
<p>Bien, sólo nos queda compilarlo todo, esto es lo más fácil, lo único que tenemos que hacer eso:<br />
$ cd /usr/src/dri/build/xc<br />
$ make World &gt;&amp; world.log</p>
<p>Compilamos así para generar un bonito fichero de log donde tendremos todos los mensajes de la compilación, muy útil si se produjese algún error. Si tenéis errores comprobad el asunto de los directorios antes que nada, si no están justo como he indicado no os va a funcionar. Para ver los mensajes de compilación durante ésta sólo tenéis que poner lo siguiente:<br />
$ tail -f world.log</p>
<p>Si hasta aquí no habéis tenido problemas sólo queda instalar y configurar.</p>
<p>6. Instalar y configurar todo</p>
<p>Para instalar todo esto (XFree y Mesa) tendremos que machacar las XFree antiguas. Las librerias Mesa las va a instalar en /usr/X11R6/lib por lo que (en principio) no va a machacar las que instalamos nosotros con el sistema de paquetes de nuestra distro, ya que éstas se suelen meter en /usr/lib.</p>
<p>Es recomendable que paréis <span class="caps">GDM</span> antes de hacer esto, así que:<br />
$ /etc/init.d/gdm stop<br />
$ cd /usr/src/dri/build/xc<br />
$ make install</p>
<p>Si en /etc/X11/XF86Config-4 usábais el driver específico de vuestra tarjeta no tendréis que cambiar nada, si teníais vesa o alguno de éstos pues tenéis que poner el de vuestra tarjeta. Ahora ya podéis poner otra vez <span class="caps">GDM</span> en funcionamiento. Arranque o no, echad un vistazo al archivo /var/log/XFree.0.log para ver todo lo que ha hecho y no ha hecho. Si hay problemas con <span class="caps">DRM</span> tenéis que revisar vuestra configuración de agpgart. Si todo fue bien os dirá (en alguna linea) que el direct rendering infraestructure está activado. Ahora sólo falta probarlo, para ello, abrid un terminal dentro de las X y ejecutad:<br />
$ glxinfo</p>
<p>Al principio os tiene que salir algo como: direct rendering: Yes, si es asi, enhora buena, ya podéis disfrutar de la aceleración 3D en vuestro sistema <span class="caps">GNU</span>/Linux. En caso contrario, si en el archivo XFree.0.log no hay ningún error significa que <span class="caps">DRI</span> está funcionando, pero, ¿por qué no funciona?, muy sencillo: <span class="caps">GLX</span> está usando las Mesa del sistema de paquetes en vez de las que hemos compilado ahora. Aquí viene mi solución (un tanto polémica): en /usr/lib están las librerias que no queremos, son las libGL.<strong>, pues las movemos a nuestro home por ejemplo (borrarlas es una peor idea porque nunca se sabe&#8230;) y ahora hacemos enlaces de /usr/X11R6/lib/libGL.</strong> a /usr/lib/libGL.* (con ln -s). Si ahora volvéis a probar glxinfo o glxgears seguro que ya os funciona.</p>
<p>7. Instalación <span class="caps">DRI</span> a partir de paquetes binarios</p>
<p>Lo primero será descargarlos, los podréis encontrar en: <a href="http://www.nixnuts.net/files/binary/">http://www.nixnuts.net/files/binary/</a> La instalacion es muy sencilla:<br />
$ dpkg -i drm-trunk-module-2.6.8-1-k7_2004.11.01-1_i386.deb<br />
$ dpkg -i xlibmesa-gl1-dri-trunk_2004.11.01-1_i386.deb<br />
$ dpkg -i xserver-xfree86-dri-trunk_2004.11.01-1_i386.deb</p>
<p>Como véis en el nombre del fichero está la fecha. <span class="caps">DRI</span> es un proyecto muy dinámico y continuamente está sacando versiones y modificaciones.</p>
<p>Puede que tengáis problemas de dependencias con las librerias Mesa, en ese caso desinstalarlas primero. De todas formas, al instalar estos paquetes se crearán automáticamente &#8216;diversions&#8217;, es decir, tendréis las dos versiones instaladas pero se deben usar automáticamente las de <span class="caps">DRI</span>.</p>
<p>8. Refinando las <span class="caps">DRI</span></p>
<p>En fin, las <span class="caps">DRI</span> ya nos funcionan y estamos conentos&#8230; ¿estamos contentos?, pues probablemente estaríamos más contentos si pudiésemos enredar con ellas, configurar detallitos y todas esas cosas que nos gusta hacer con nuestra Debian. Exite un bonito programa llamado DRIConf, lo podéis descargar en: <a href="http://freedesktop.org/~fxkuehl/driconf/">http://freedesktop.org/~fxkuehl/driconf/</a> Para instalarlo necesitaréis el paquete python2.3-scipy-core y es muy sencillo:<br />
$ unp driconf-0.2.2.tar.gz<br />
$ cd driconf-0.2.2<br />
$ python setup.py install (como root)</p>
<p>Podéis configurar las <span class="caps">DRI</span> para un usuario en concreto e incluso para un programa en concreto, ¿cómo se usa?&#8230; ejecutadlo y hacer pruebas que es lo mismo que estoy haciendo yo ahora&#8230;</p>
<p>9. Enlaces</p>
<ul>
	<li><span class="caps">DRI</span> Proyect  [en]</li>
	<li><span class="caps">DRI</span> Compilation Guide  [en]</li>
</ul>
      </div>

      

      <hr/>

      <div class="pagination pagination-centered">
  <ul>
    
      <li class="prev"><a href="/recipe/2007-01-20/montar-un-repositorio-trivial-de-paquetes-debian" title="Montar un repositorio trivial de paquetes Debian">&larr; Previous</a></li>
    

    <li><a href="/archive.html">Archive</a></li>

    
      <li class="next"><a href="/recipe/2007-01-21/impresora-hp-laserjet-1000-usb" title="Impresora HP LaserJet 1000 USB">Next &rarr;</a></li>
    
  </ul>
</div>


      <hr/>

      

<div id="show_comments"> [ <a onclick="show_comments();"> show comments </a> ] </div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'crysol'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </div>
  </div>
</div>


	</div>
      </div>

      <hr/>

      <footer>
        <p>&copy; 2013 CRySoL
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
	  See <a href="https://github.com/CRySoL/CRySoL.github.io" target="_blank">site sources</a>.
	  <br/>
	  Generated at Fri Sep 20 16:34:47 +0200 2013
	</p>
      </footer>

    </div>

    
  </body>
</html>

