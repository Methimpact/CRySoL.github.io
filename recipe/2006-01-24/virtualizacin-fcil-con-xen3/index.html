
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Virtualización fácil con Xen3</title>
    
    <meta name="author" content="CRySoL">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

    

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
<!--
	  <a class="brand-image" href="/"><img class="brand-image" src="/assets/themes/twitter/logo.png"/></a>
-->
          <a class="brand" href="/">CRySoL</a>
          <ul class="nav">
            
            
            


  
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/recipes.html">Recipes</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/users.html">Users</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="row-fluid">
	<div class="content">
          
<div class="sidebar span3">
  <div id="logo">
  <a href="/">
    <img src="/assets/images/logo.png" alt="logo"/>
  </a>
</div>

  <div class="metadata">
  <h2>this</h2>
  <ul>
    
      <li>author: 
  <a href="/users.html#int-0">
   int-0
  </a>


        
        <span class="author-photo">

  
    <img src="/assets/files/pictures/picture-8.jpg" width="48" alt="picture"/>
  

</span>

      </li>
      
      
    

    <li>created: 2006-01-24 </li>

    <li><a href="https://github.com/CRySoL/web.source/raw/master/_posts/migrated/2006-01-24-virtualizacin-fcil-con-xen3.html">source / <a href="https://github.com/CRySoL/web.source/edit/master/_posts/migrated/2006-01-24-virtualizacin-fcil-con-xen3.html">edit</a></li>

  
    <li>categories:
    
      <a href="/categories.html#recipe-ref">recipe</a>
    
    </li>
  

  
      <li>migrated&nbsp;from&nbsp;<a href="http://crysol.org/node/201">node/201</a></li>
  

  
    <li>tags:
    
      <a href="/tags.html#Arco-ref">Arco</a>
    
    </li>
  
  </ul>

  
     
     
  

  
     
     
     <a class="tag-icon" href="/tags.html#Arco-ref">
        <img src="http://crysol.org/files/category_pictures/arco_3D_taxonomy.png" title="Arco" alt="Arco-icon"/>
     </a>
     
  

  <!-- AddThis Button BEGIN -->
<div class="share addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51cdd0d57c014017"></script>
<!-- AddThis Button END -->

</div>

<div class="related">
  <h2>related</h2>

  <ul>
   
   
      
        
          
          <li><a href="/recipe/2012-11-27/inslacin-de-debian-en-un-asus-ux32v-con-w8-preinstalado">Inslación de Debian en un ASUS UX32V con W8 preinstalado</a></li>
        
      
        
          
          <li><a href="/recipe/2012-09-05/ghdl-vhpidirect-o-como-crear-compilar-y-ejecutar-un-programa-vhdl-con-llamadas-a-cdigo-c">GHDL + VHPIDIRECT o como crear, compilar y ejecutar un programa VHDL con llamadas a código C</a></li>
        
      
        
          
          <li><a href="/recipe/2011-03-26/arco-devel-toggle-split">arco-devel: toggle-split</a></li>
        
      
        
          
          <li><a href="/recipe/2011-02-18/dependency-injection-and-mocking-classes-using-c-and-google-mock-library">Dependency injection and mocking classes using C++ and google-mock library</a></li>
        
      
        
          
          <li><a href="/recipe/2011-02-18/dependency-injection-and-mocking-classes-using-c-and-google-mock-library">Dependency injection and mocking classes using C++ and google-mock library</a></li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
   
  </ul>

  
</div>

<div class="recent">
  <h2>recent</h2>
  <ul>
  
    <li><a href="/recipe/2014-09-28/nautilus-sort-directories-first">nautilus: list folder before files</a></li>
  
    <li><a href="/recipe/2014-05-27/vagrant-multi-machine">multi machine Vagrantfile</a></li>
  
    <li><a href="/recipe/2014-05-20/veewee-on-debian">Installing veewee on Debian sid</a></li>
  
    <li><a href="/recipe/2014-05-19/latex-packages">Useful LaTeX packages and their main commands</a></li>
  
    <li><a href="/recipe/2014-01-22/run-until-fails">Keep repeating a command until it fails</a></li>
  
  </ul>
</div>

</div>

<div class="node span9">
  <div class="page-header">
    <h1>Virtualización fácil con Xen3 </h1>
  </div>

  <div class="row-fluid post-full">
    <div class="span12">
      <div class="content">
	<blockquote>Esta receta no se si tendrá muchas aplicaciones "domésticas", en ella vamos a tratar de crear <em>n</em> máquinas virtuales en una única máquina física. Esto permitirá crear (por ejemplo) <em>n</em> servidores, cada uno con unos servicios determinados en una misma máquina física. Con ello se consigue (entre otras cosas) proteger unos servicios mas "críticos" de otros más "vulnerables" (lo que pase en una máquina es independiente al resto).</blockquote>

<!--break-->



<h1>Qué es Xen</h1>
Xen es un sistema de virtualización similar a <em>VM-Ware</em> o <em>QEmu</em>, pero tiene una difirecia bastante notable: mientras que <em>VM-Ware</em> degrada alrededor de un 30% el rendimiento de la máquina emulada, Xen lo hace entre un 2% y un 3% (es increible pero cierto!), pero claro... no va a ser todo de color de rosa: es necesario parchear tanto el núcleo del sistema real como el núcleo de los sistemas que se emularán (esto debería impedir ejecutar sistemas hasefroch 95, XP, etc. bajo un linux ya que no podemos parchear, a priori, el núcleo de estos sistemas privativos... se comenta por ahí que <b>sí</b> existen estos parches, aunque yo no los he visto).

¿Cómo consigue esto?, en realidad Xen no es una máquina virtual, sino un <a href="http://en.wikipedia.org/wiki/Hypervisor">hypervisor</a> para núcleos linux de la rama 2.6, cuando se inicia un núcleo parcheado con Xen antes de nada aparecerán unos mensajes que empiezan con "[XEN]:", así se muestran los mensajes del hypervisor, también se puede dirigir la consola de Xen a un puerto serie concreto o compartir una cosola con el sistema principal. Después podremos cargar más núcleos como linux, FreeBSD o Plan9.

Para gestionar todos los sistemas que se quieran ejecutar en una máquina, Xen divide el sistema en dominios (o <b>dom</b>), el dominio 0 (o <b>Dom0</b> a partir de ahora, denominado asi por ser privilegiado o <em>priviledge</em>) es el sistema real y será el encargado de lanzar/administrar el resto de los dominios (o genéricamente <b>DomU</b> o <em>unpriviledge</em> a partir de ahora,). La comunicación entre dominios se realiza mediante <em>backends</em> de <em>hotplug</em>, esto permite la comunicación entre dominios con interfaces de red virtuales (o <b>vif</b>'s), discos compartidos, etc.

Los discos de los dominios serán imagenes de sistemas de ficheros ext2, ext3 o reiser. Se pueden crear con dd y montar como dispositivos <em>loop</em> (esto lo veremos más adelante) o incluso usar particiones reales.
La conexión de los dominios a una red se puede hacer de diversos modos: <em>bridged</em>, <em>NAT</em>, etc.
Las versiones de Xen a partir de la 3 soportan virtualización SMP en sistemas SMP. Ninguna versión de Xen liberada hasta ahora soporta librerías <a href="http://en.wikipedia.org/wiki/Thread-local_storage">TLS</a>, es necesario "deshabilitarlas", no he encontrado un método <em>Debian-like</em> en ninguna parte para hacerlo, los chicos de Xen sugieren lo siguiente (que es lo que he hecho yo):


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> <span class="nb">cd</span> /lib
<span class="gp">$</span> mv tls tls.disabled</code></pre></div>
</div>

<h1>Instalación con paquetes binarios</h1>
La forma más cómoda de instalar Xen es descargarse los paquetes binarios: <tt>xen-3.0.0-install-x86_32.tgz</tt> o <tt>xen-3.0.0-install-x86_32p.tgz</tt> (incluye soporte <a href="http://en.wikipedia.org/wiki/Physical_Address_Extension">PAE</a>). Estas distribuciones traen de serie el soporte SMP. Ahora símplemente debemos descomprimir el paquete y ejecutar el script de instalación:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> unp xen-3.0.0-install-x86_32.tgz
<span class="gp">$</span> <span class="nb">cd </span>xen-3.0.0-install
<span class="gp">#</span> ./install.sh</code></pre></div>
</div>

Este script copiará los ejecutables necesarios, las bibliotecas de python, el hypervisor y los scripts de inicio. Sólo nos queda configurar Grub y corregir unos problemas con este tipo de instalación.

<h1>Problemas serios y soluciones cutres en la instalación</h1>
Bien, esos problemas "serios" me han ocurrido en una Debian unstable (tenedlo en cuenta si usáis Ubuntu o alguna otra), algunos ejecutables no funcionan correctamente por no encontrar una serie de librerías: <tt>libssl.so.4</tt>, <tt>libcrypto.so.4</tt> y <tt>libcurl.so.4</tt>. La solución <b>cutre</b> que he encontrado ha sido la siguiente: enlaces débiles de las librerías que vienen en Debian (más nuevas) a las que me pide el programa:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> <span class="nb">cd</span> /usr/lib
<span class="gp">#</span> ln -s libssl.so libssl.so.4
<span class="gp">#</span> ln -s libcrypto.so libcrypto.so.4
<span class="gp">#</span> ln -s libcurl.so libcurl.so.4</code></pre></div>
</div>

También puede ocurrir que los programas <em>python</em> den error al importar algunos módulos, esto también se puede corregir de forma cutre fácilmente:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> <span class="nb">cd</span> /usr/lib
<span class="gp">#</span> cp python/* python2.3/</code></pre></div>
</div>

O también podríamos haber creado enlaces simbólicos (más mejor...). El problema está en que el script de instalación deja las bibliotecas de python en <tt>/usr/lib/python</tt> y nuestro intérprete las busca en <tt>/usr/lib/python2.3</tt>.

Un problema que ha aparecido en esta versión de Xen (coincidiendo con la sustitución de <em>hotplug</em> por <em>udev</em>) se debe a que aunque se necesita el módulo <b>loop</b> éste no se carga, es necesario cargarlo antes de iniciar <b>xend</b>. Para ello haremos lo siguiente:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> <span class="nb">echo</span> <span class="s2">&quot;loop&quot;</span> &gt;&gt; /etc/modules</code></pre></div>
</div>

<blockquote>Nota: cuando se carga el módulo, por defecto no deja montar más de 8 dispositivos <em>loopback</em>, esto puede ser problemático en sistemas donde querámos montar más de 4 dominios y no queramos usar particiones reales. Podemos pasar un parámetro a la carga del módulo:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> modprobe loop <span class="nv">max_loop</span><span class="o">=</span>64</code></pre></div>
</div></blockquote>

<!--break-->



Finalmente, la instalación añade dos servicios nuevos en <em>init.d</em> pero, en cambio, no actualiza los enlaces simbólicos de los servicios según el <em>runlevel</em>, así que lo hacemos nosotros y en paz:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> update-rc.d xend defaults
<span class="gp">#</span>update-rc.d xendomains defaults</code></pre></div>
</div>

Con esto, la próxima vez que arranque el sistema lo hará con el módulo cargado, <b>xend</b> inciará correctamente y podremos lanzar todos los dominios que necesitemos.

<h1>Configurar GRUB</h1>
Bueno... por si no lo he dicho: es obligatorio <b>Grub</b>... así que migraros los que aún sigáis usando cargadores obsoletos... :-P

En este paso, tendréis que tener <tt>xen-3.0.0.gz</tt> en <tt>/boot</tt>, al igual que las tres imagenes del kernel (sólo privilegiado o -xen0, sin privilegios o -xenU y uno capaz de funcionar de ambos modos o -xen). Muy importante es que no ejecutéis <b>update-grub</b> porque os va a añadir las imágenes parcheadas al menú de arranque y esas opciones no van a ser válidas. Las nuevas opciones las añadiremos "a pelo":
<pre>title Xen 3 Linux, Kernel 2.6.12-xen
root(hd0,4)
kernel /boot/xen-3.0.0.gz dom0_mem=262144
module /boot/vmlinuz-2.6.12.6-xen root=/dev/hde5</pre>
Empecemos con las explicaciones... lo primero que las opciones <b>root</b> serán distintas en vuestro sistema, mirad la de las otras opciones de arranque que tenéis y poned lo mismo.
También podemos especificar una imagen <em>initrd</em>, para ello solo tenemos que añadir una nueva entrada tal que:
<pre>module /boot/initrd.img-2.6.12</pre>
De todas formas yo no la uso y me funciona.
Otra cosa, <b>dom0_mem</b> establece la cantidad de memoria física que verá el Dom0, este dominio no lo usaremos para ofrecer servicios, símplemente para gestionar el resto de dominios, por tanto, no gastéis demasiada memoria en él, yo le he asignado 256Mb que para lo que se usa ya va bien.

Pues nada, ya sólo nos falta reiniciar el sistema y seleccionar ese arranque, si todo va bien veremos los mensajes del hypervisor y después los del arranque normal del linux, si esto es así... ¡ya tenemos el Dom0 funcionando!.

<h1>Compilación de Xen3</h1>
Puede ser que queramos meternos de lleno en Xen, ya sabéis: compilar es más bonito, pero tened en cuenta una cosa, se crean 3 núcleos diferentes: <b>-xen</b> (funciona como Dom0 y DomU), <b>-xen0</b> (funciona sólo como Dom0) y <b>-xenU</b> (funciona como DomU, tiene algunos drivers menos y ocupa 30% menos); así pues el núcleo se compilará 3 veces cada vez, si os apetece entonces vamos al tema:

Necesitaremos los paquetes necesarios para compilar el linux, a parte, también tendremos que tener instalado:
<ul>
<li>zlib1g-dev</li>
<li>rubber (para instalar latex de "rebote")</li>
<li>python-dev</li>
<li>gs-common</li>
<li>transfig</li>
<li>tetex-extra</li>
<li>python-twisted</li>
</ul>
Si hace falta algún paquete más, por favor, comunicadmelo. La compilación es bastante rollo porque si te falta alguno de estos programas se para y cada vez que se hace un <em>make</em> empieza desde el principio porque hace <em>clean</em> antes de empezar.

Ahora necesitamos el archivo <tt>xen-3.0.0-src.tgz</tt>, en la página de <a href="http://www.xensource.com/xen/downloads/">XenSource</a> no está el link directo, hay que pedirlo por mail pero os lo dan automáticamente al hacerlo. Lo que si os viene es un archivo <em>torrent</em> para descargar los mismos ficheros, intentad esta opción si pasáis de dar vuestro mail por ahí.

Una vez tengamos el fichero, lo descomprimimos:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> unp xen-3.0.0-src.tgz</code></pre></div>
</div>
Y finalmente compilamos:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> <span class="nb">cd </span>xen-3.0.0
<span class="gp">$</span> make <span class="nv">KERNELS</span><span class="o">=</span>linux-2.6-xen world</code></pre></div>
</div>
Esto compilará la documentación y tres núcleos parcheados: <em>version</em>-xen0, <em>version</em>-xenU y <em>version</em>-xen: uno para el Dom0, otro para el DomU y finalmente uno que puede funcionar de ambos modos (este el que usaremos para todo...). Los parches tienen un problema: vienen pensados para una versión concreta del linux, no sirve cualquiera de la 2.6, en este caso hace falta la 2.6.12, pero tranquilos porque el mismo script se descargará los fuentes del núcleo apropiado y lo parcheará debidamente... más fácil imposible!

Una vez compilado lo instalamos (ya como root):


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> make install</code></pre></div>
</div>

Y ahora como antes, sólo nos queda configurar Grub.

<h1>Parámetros de configuración de núcleos parcheados</h1>
Supongamos que queremos establecer/modificar valores en el núcleo: inhabilitar módulos, añadir nuevos, etc. Podemos utilizar objetivos normales como los vistos en la receta <a href="http://crysol.inf-cr.uclm.es/drupal/?q=node/182">"Configurar, parchear, cacharrear y compilar un linux FÁCILMENTE"</a> de una forma bastante simple:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> <span class="nb">cd </span>xen-3.0.0
<span class="gp">$</span> <span class="nb">cd </span>linux-2.6.12-xen0
<span class="gp">$</span> make <span class="nv">ARCH</span><span class="o">=</span>XEN menuconfig</code></pre></div>
</div>

También puede ser más cómodo usar <em>make-kpkg</em>, en cuyo caso:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> make-kpkg --arch xen kernel_image</code></pre></div>
</div>

Los archivos de configuración también se gestionan de igual manera, aunque este núcleo tendrá nuevos parámetros añadidos por el parche de Xen.
Hay que tener en cuenta que esto funcionará una vez compilado como se ha explicado porque la descarga y parcheo del núcleo se habrán realizado automáticamente, en caso contrario hay que hacerlo "a mano".

<h1>Creación de dominios</h1>
Bien... ¿cómo creamos DomU?... en Debian existe un paquete llamado <b>xen-tools</b> con unos scripts bastante chulos que lo hacen todo automático, explicaremos su uso más abajo; ahora veremos como hacerlo a la forma "tradicional".

Los dominios se describen con pequeños archivos de configuración situados en <tt>/etc/xen/</tt> que especifican aspectos básicos como el disco, las interfaces de red, el número de procesadores virtuales, etc. Nosotros vamos a crear un dominio cuyo disco va a ser un archivo (para manejarlo luego con más comodidad), para ello creamos el fichero y le damos formato. Los alojaremos en <tt>/var/xen/domains/{nombre_dominio}</tt>, no por obligación, sino por comodidad:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">cd /var/xen/domains/xentest/</span>
<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>disk.img <span class="nv">bs</span><span class="o">=</span>1k <span class="nv">seek</span><span class="o">=</span>2048k <span class="nv">count</span><span class="o">=</span>1
<span class="gp">#</span> mkfs -t ext3 disk.img</code></pre></div>
</div>
Con esto hemos creado un archivo de 2GB que contiene un sistema ext3, lo podemos montar para "rellenarlo" de una forma fácil:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> mount -o loop disk.img /mnt/test
<span class="gp">#</span> cp -ax /<span class="o">{</span>root,dev,var,etc,usr,bin,sbin,lib<span class="o">}</span> /mnt/test
<span class="gp">#</span> mkdir /mnt/test/<span class="o">{</span>proc,sys,home,tmp<span class="o">}</span></code></pre></div>
</div>
Esto copiará nuestro sistema actual dentro de ese "sistema virtual", además, crearemos los directorios necesarios para la adecuada ejecución del sistema. Ya podemos desmontar /mnt/test, ahora crearemos otra imagen para el <em>swap</em>:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>swap.img <span class="nv">bs</span><span class="o">=</span>1k <span class="nv">seek</span><span class="o">=</span>128k <span class="nv">count</span><span class="o">=</span>1
<span class="gp">#</span> mkswap swap.img</code></pre></div>
</div>
Con esto tendremos un archivo de intercambio de 128Mb, ahora solo nos queda crear el archivo de configuración (xentest.cfg por ejemplo):
<pre>kernel = "/boot/vmlinuz-2.6.12.6-xen"
memory = 128
name = "xentest"
disk = ['file:/var/xen/domains/xentest/disk.img,sda1,w','file:/var/xen/domains/xentest/swap.img,sda2,w']
root = "/dev/sda1 ro"
dhcp = "dhcp"
nics = 1</pre>
Como véis, especificamos que núcleo (accesible por Dom0) y cuanta memoria dispondrá. También se especifica el número de interfaces de red (<em>nics</em>) y cómo obtendrá la IP, tambíen se puede especificar directamente:
<pre>ip = "192.168.0.2"</pre>
Este archivo lo pondremos en /etc/xen/ y podremos lanzarlo mediante:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> xm create xentest.cfg -c</code></pre></div>
</div>
Si Dom0 esta correctamente configurado, se habrá lanzado <em>xend</em> y <em>xendomains</em> al inicio, entonces se lanzará ese nuevo dominio, podemos
ver que se ha lanzado y se está ejecutando con el comando:

<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> xm list</code></pre></div>
</div>

Si queremos que un dominio se lance automáticamente al iniciar Dom0 sólo tenemos que crear un enlace simbólico del archivo de configuración en el directorio <tt>/etc/xen/auto</tt>:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> <span class="nb">cd</span> /etc/xen
<span class="gp">#</span> ln -s xentest.cfg auto/xentest.cfg</code></pre></div>
</div>

<h1>Creación de dominios con xen-tools</h1>
Debian dispone de dos paquetes relativos a Xen: <b>xen</b> y <b>xen-tools</b>. Es mejor no instalar el paquete <b>xen</b> porque va por la versión <b>2.0.6</b>, además tampoco incluye los núcleos parcheados con lo que tendremos que compilarlo nosotros. Si podemos instalar y usar <b>xen-tools</b>, este paquete incluye scripts muy útiles para la gestión de dominios (creación, duplicado, etc.). Una vez instalado el paquete, podemos crear dominios fácilmente con la herramienta <b>xen-create-image</b> del paquete <b>xen-tools</b>, tan fácil como:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> xen-create-image --dir /var/xen --hostname xentest</code></pre></div>
</div>
Esto creará una Debian base en el archivo de imagen creando el archivo de intercambio directamente. Podemos especificar más parámetros, por ejemplo:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">#</span> xen-create-image --dir /var/xen --hostname xentest --fs ext3 --kernel /boot/vmlinuz-2.6.12.6-xen --mirror http://ftp.rediris.es/debian --dist sarge</code></pre></div>
</div>

<h1>Configurar la red de los dominios</h1>
En primer lugar, el Dom0 se configura como siempre, no hay que hacer nada "raro". Tenemos dos posibilidades para crear una red con los dominios: <em>bridged</em> o <em>NAT</em>. En modo <em>bridge</em> la interfaz del DomU tiene acceso a la red através del interfaz de Dom0. Podemos imaginarlo como si nuestra máquina real tiene varias IP's, una para cada dominio. En el modo <em>NAT</em> creamos una LAN entre los DomU, la salida a la LAN real se hace por la interfaz del Dom0 de forma similar a como funciona un red doméstica con varios equipos y un "routercillo" conectado a una ADSL.

Vamos con el modo <em>bridge</em>, en principio este modo es más sencillo pero tendremos que realizar un par de cambios a la configuración de nuestros DomU: principalmente usar el linux parcheado específicamente para DomU, modificamos la línea del kernel a cargar por la siguiente:
<pre>kernel = "/boot/vmlinuz-2.6.12.6-xenU"</pre>
Con esto, programas como <tt>dhcp-client</tt> nos darán menos problemas. En mi caso todos los dominios se configuran con <em>DHCP</em>, vuestra LAN debe tener <tt>dhcpd</tt> o similar funcionando. Todos los dominios tienen que tener la interfaz configurada en <tt>/etc/network/interfaces</tt> como sigue:
<pre>auto eth0
iface eth0 inet dhcp</pre>
Y en el archivo de configuración del dominio:
<pre>nics = 1
dhcp = "dhcp"</pre>
Xen configura la red mediante unos scripts (más o menos sencillos pero muy bien comentados) situados en <tt>/etc/xen/scripts</tt>, echad un vistazo a <tt>network-bridge</tt> que os explica como arrancarlo, básicamente:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> /etc/xen/scripts/network-bridge start</code></pre></div>
</div>

Y ya arrancamos el dominio como antes, si todo ha ido bien, <tt>dhcp-client</tt> debe obtener una IP (también tenéis que tener <tt>dhcpd</tt> bien configurado en vuestra LAN...). Podéis probar a hacer <em>pings</em> a equipos incluso fuera de la LAN o desde otros equipos al dominio. Los <em>pings</em> hacedlos así:


<div class="console">
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">$</span> ping -c <span class="m">10</span> www.google.com</code></pre></div>
</div>

Por la sencilla razón de que los dominios, al compartir la terminal, no reciben señales como <em>Ctrl+C</em> y el <em>ping</em> se va a ejecutar indefinídamente hasta que no cerréis el dominio.

<h1>Conclusiones</h1>
En esta receta se han quedado muchisimas cosas por explicar, por ejemplo: configuración del núcleo parcheado con Xen, parámetros de Xen, nuevas opciones de núcleos parcheados, imagenes Xen en discos reales, en discos LVM, en discos NFS, migración en vivo de máquinas Xen (esto es impresionante), topología de red en dominios Xen, etc. Muchas de estas cosas son fáciles de realizar con la documentación en la mano, otras las estoy estudiando a ver si lo echo a andar completamente. Por ahora necesito ayuda con lo que ya he puesto aquí... gracias y que le aproveche a alguien... ;-)

<h1>Enlaces de interés</h1>
<a href="http://www.xensource.com/xen/xen/">XenSource, página oficial</a>

<a href="http://www.howtoforge.com/perfect_xen_setup_debian_ubuntu">Perfect Xen setup on Debian/Ubuntu</a>


      </div>

      

      <hr/>

      <div class="pagination pagination-centered">
  <ul>
    
      <li class="prev"><a href="/tale/2006-01-22/stallman-en-la-esi" title="Stallman en la ESI?">&larr; Previous</a></li>
    

    <li><a href="/archive.html">Archive</a></li>

    
      <li class="next"><a href="/recipe/2006-01-25/arranque-desde-red-sin-disco-duro" title="Arranque desde red sin disco duro">Next &rarr;</a></li>
    
  </ul>
</div>


      <hr/>

      

<div id="show_comments"> [ <a onclick="show_comments();"> show comments </a> ] </div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'crysol'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </div>
  </div>
</div>


	</div>
      </div>

      <hr/>

      <footer>
        <p>&copy; 2014 CRySoL
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
	  See <a href="https://github.com/CRySoL/web.source" target="_blank">site sources</a>.
	  <br/>
	  Generated at 2014-10-21 21:14:45 +0200
	</p>
      </footer>

    </div>

    
  </body>
</html>

